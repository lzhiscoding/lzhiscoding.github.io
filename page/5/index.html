<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Lzh正在写代码</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="千里之行始于足下">
<meta property="og:type" content="website">
<meta property="og:title" content="Lzh正在写代码">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="Lzh正在写代码">
<meta property="og:description" content="千里之行始于足下">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Lzh">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Lzh正在写代码" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Lzh正在写代码</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-设计模式-适配器模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-12-26T11:03:51.000Z" itemprop="datePublished">2024-12-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/">设计模式-适配器模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h1><p>适配器模式（Adapter Pattern）充当两个不兼容接口之间的桥梁，属于结构型设计模式。它通过一个中间件（适配器）将一个类的接口转换成客户期望的另一个接口，使原本不能一起工作的类能够协同工作。</p>
<p>这种模式涉及到一个单一的类，该类负责加入独立的或不兼容的接口功能。举个真实的例子，读卡器是作为内存卡和笔记本之间的适配器。您将内存卡插入读卡器，再将读卡器插入笔记本，这样就可以通过笔记本来读取内存卡。</p>
<h1 id="类图示例"><a href="#类图示例" class="headerlink" title="类图示例"></a>类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/26/676d408c3e9f4.png" alt="适配器模式.png"></p>
<h1 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h1><p>球员姚明刚来到NBA,听不懂教练布置的战术，所以需要一个翻译来解释教练的战术。这个翻译就是适配器</p>
<h2 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h2><p><img src="https://www.helloimg.com/i/2024/12/26/676d40833b27f.png" alt="NBA适配器.png"></p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//球员抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Player</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">Attack</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">Defense</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//前锋类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Forwards</span> <span class="keyword">extends</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Forwards</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Attack</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;前锋&quot;</span> + name + <span class="string">&quot;进攻&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Defense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;前锋&quot;</span> + name + <span class="string">&quot;防守&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//中锋类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Center</span> <span class="keyword">extends</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Center</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Attack</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;中锋&quot;</span> + name + <span class="string">&quot;进攻&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Defense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;中锋&quot;</span> + name + <span class="string">&quot;防守&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//后卫类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Guard</span> <span class="keyword">extends</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Guard</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Attack</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后卫&quot;</span> + name + <span class="string">&quot;进攻&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Defense</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;后卫&quot;</span> + name + <span class="string">&quot;防守&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//姚明属于外籍中锋</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ForeignCenter</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">jingong</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;外籍中锋&quot;</span> + name + <span class="string">&quot;进攻&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fangshou</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;外籍中锋&quot;</span> + name + <span class="string">&quot;防守&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//适配器类，既要懂英语(继承Player类)，也要会中文</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Translator</span> <span class="keyword">extends</span> <span class="title class_">Player</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">ForeignCenter</span> <span class="variable">foreignCenter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForeignCenter</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Translator</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        foreignCenter.setName(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Attack</span><span class="params">()</span> &#123;</span><br><span class="line">        foreignCenter.jingong();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Defense</span><span class="params">()</span> &#123;</span><br><span class="line">        foreignCenter.fangshou();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Adapter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Player</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Forwards</span>(<span class="string">&quot;巴蒂尔&quot;</span>);</span><br><span class="line">        b.Attack();</span><br><span class="line">        <span class="type">Player</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Guard</span>(<span class="string">&quot;麦克格雷迪&quot;</span>);</span><br><span class="line">        m.Attack();</span><br><span class="line">        <span class="type">Player</span> <span class="variable">y</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Translator</span>(<span class="string">&quot;姚明&quot;</span>);</span><br><span class="line">        y.Defense();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="适配器模式包含以下几个主要角色："><a href="#适配器模式包含以下几个主要角色：" class="headerlink" title="适配器模式包含以下几个主要角色："></a>适配器模式包含以下几个主要角色：</h1><ol>
<li>目标接口（Target）：定义客户需要的接口。</li>
<li>适配者类（Adaptee）：定义一个已经存在的接口，这个接口需要适配。</li>
<li>适配器类（Adapter）：实现目标接口，并通过组合或继承的方式调用适配者类中的方法，从而实现目标接口。</li>
</ol>
<h1 id="模式分析"><a href="#模式分析" class="headerlink" title="模式分析"></a>模式分析</h1><ul>
<li>优点<ol>
<li>促进了类之间的协同工作，即使它们没有直接的关联。</li>
<li>提高了类的复用性。</li>
<li>增加了类的透明度。</li>
<li>提供了良好的灵活性。</li>
</ol>
</li>
<li>缺点<ol>
<li>过度使用适配器可能导致系统结构混乱，难以理解和维护。</li>
<li>在Java中，由于只能继承一个类，因此只能适配一个类，且目标类必须是抽象的。</li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/26/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" data-id="cm8sja986005w8ktbd6jv89uv" data-title="设计模式-适配器模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Linux管道、环境变量和常用命令" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/25/Linux%E7%AE%A1%E9%81%93%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="article-date">
  <time class="dt-published" datetime="2024-12-25T11:56:47.000Z" itemprop="datePublished">2024-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/25/Linux%E7%AE%A1%E9%81%93%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Linux管道、环境变量和常用命令</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="7-管道、环境变量与常用命令"><a href="#7-管道、环境变量与常用命令" class="headerlink" title="7 管道、环境变量与常用命令"></a>7 管道、环境变量与常用命令</h1><h3 id="7-1-管道"><a href="#7-1-管道" class="headerlink" title="7.1 管道"></a>7.1 管道</h3><p>类似文件重定向，可以将前一个命令的<code>stdout</code>重定向到下一个命令的<code>stdin</code></p>
<p><strong>要点</strong></p>
<ul>
<li>仅处理<code>stdout</code>，忽略<code>stderr</code></li>
<li>管道右边的命令必须能接收<code>stdin</code>，例如<code>rm</code>无法接收<code>stdin</code></li>
<li>多个管道命令可以串联</li>
</ul>
<p><strong>与文件重定向的区别</strong></p>
<ul>
<li>文件重定向的左边为命令，右边为文件</li>
<li>管道左右两边都是命令，左边必须有<code>stdout</code>，右边必须有<code>stdin</code></li>
</ul>
<p><strong>例：统计当前目录下的所有Python文件的总行数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find  . -name &#x27;*.py&#x27; | xargs cat  | wc -l</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>cat</code>的作用是，把接收的文件拼接在一起，然后输出到<code>stdout</code>中。</p>
<p><code>xargs</code>接收<code>find</code>的<code>stdout</code>作为自己的<code>stdin</code>，然后按空格拆分成多项，传给<code>cat</code>作为它的文件参数。如果不用<code>xargs</code>，<code>cat</code>只会输出传入的文件名，与预期结果不一样。</p>
<p>例如，当前文件夹下有2个文件<code>a.txt</code>和<code>b.txt</code>，则<code>find . -name &#39;*.py&#39; | cat</code>得到输出与<code>find . -name &#39;*.py&#39;</code>一样，都是两行文件名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.../a.txt</span><br><span class="line">.../b.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>使用<code>xargs</code>，<code>cat</code>才能正确获取<code>a.txt</code>和<code>b.txt</code>的内容。</p>
<p><code>wc</code>用于统计文件内容，<code>-l</code>表明统计文件行数。</p>
<h3 id="7-2-环境变量"><a href="#7-2-环境变量" class="headerlink" title="7.2 环境变量"></a>7.2 环境变量</h3><p>环境变量是Linux系统的全局变量，它可以被各个进程访问到，常用来记录配置信息。</p>
<p><strong>查看</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">env  # 显示当前用户的变量</span><br><span class="line">set  # 显示当前shell的变量，包括当前的变量</span><br><span class="line">export  # 显示当前导出成用户变量的shell变量</span><br><span class="line">echo $PATH  # 输出环境变量到stdout</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>修改</strong></p>
<p>环境变量的定义、修改和删除可以参考第3章。</p>
<p>为了永久修改环境变量，需要将修改命令放入到<code>~/.bashrc</code>中。</p>
<p>编写完<code>~/.bashrc</code>后，需要执行命令<code>source ~/.bashrc</code>才能将配置应用到当前<code>bash</code>下。</p>
<p><strong>原理</strong></p>
<p>启动<code>bash</code>时，会先执行<code>~/.bashrc</code>。而<code>ssh</code>登录或<code>tmux</code>新建一个<code>pane</code>时，系统都会生成一个新的<code>bash</code>。</p>
<p><strong>常见环境变量</strong></p>
<ul>
<li><code>HOME</code>：用户家目录<code>~</code></li>
<li><code>PATH</code>：可执行文件（命令）的存储路径。<ul>
<li>路径与路径之间用<code>:</code>分隔</li>
<li>当某个可执行文件同时出现在多个路径时，系统会优先选择从左到右首次匹配到的文件</li>
</ul>
</li>
<li><code>LD_LIBRARY_PATH</code>：指定动态链接库（.so文件）的路径，内容是以<code>:</code>隔开的路径列表<ul>
<li>动态库是已经编译好的可执行程序，在主程序执行时才调用</li>
<li>静态库是未编译的代码，不能直接被调用</li>
</ul>
</li>
<li><code>C_INCLUDE_PATH</code>：C语言的头文件路径，内容是以<code>:</code>隔开的路径列表</li>
<li><code>CPLUS_INCLUDE_PATH</code>:C++的头文件路径，内容是以<code>:</code>隔开的路径列表</li>
<li><code>PYTHONPATH</code>：Python导入包的路径，内容是以<code>:</code>隔开的路径列表</li>
<li><code>JAVA_HOME</code>：JDK的安装目录</li>
<li><code>CLASSPATH</code>：存放Java导入类的路径，内容是以<code>:</code>隔开的路径列表‘</li>
</ul>
<p>例：增加一个<code>PATH</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/home/acs/homework/lesson_6/thrift_lesson/match_system/src:$PATH</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>将命令追加到<code>~/.bashrc</code>中，再用<code>source ~/.bashrc</code>让改变立即生效。</p>
<h3 id="7-3-常用命令"><a href="#7-3-常用命令" class="headerlink" title="7.3 常用命令"></a>7.3 常用命令</h3><h4 id="7-3-1-系统状况"><a href="#7-3-1-系统状况" class="headerlink" title="7.3.1 系统状况"></a>7.3.1 系统状况</h4><ul>
<li><code>top</code>：查看所有进程的信息（Linux的任务管理器）<ul>
<li><code>M</code>：按内存使用排序</li>
<li><code>P</code>：按CPU使用排序</li>
<li><code>q</code>：退出</li>
</ul>
</li>
<li><code>df -h</code>：Disk Free，查看硬盘使用情况</li>
<li><code>free -h</code>：查看内存使用情况</li>
<li><code>du -sh</code>：Disk Usage，查看当前目录占用的硬盘空间</li>
<li><code>ps aux</code>：Process Status，查看所有进程</li>
<li><code>kill</code>：关闭进程<ul>
<li><code>kill -9 pid</code>：立即关闭进程号为<code>pid</code>的进程</li>
<li><code>kill -15 pid</code>：正常关闭进程号为<code>pid</code>的进程，在进程完成关闭前准备工作后才会关闭</li>
</ul>
</li>
<li><code>netstat -nt</code>：查看所有网络连接</li>
<li><code>w</code>：列出当前登陆的用户</li>
<li><code>ping</code>：检查能否连通某个地址</li>
</ul>
<p><strong>例：查看某一进程的信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep xxx</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="7-3-2-文件权限"><a href="#7-3-2-文件权限" class="headerlink" title="7.3.2 文件权限"></a>7.3.2 文件权限</h4><p><code>chmod</code>：修改文件权限</p>
<ul>
<li><code>chmod +x xxx</code>：给<code>xxx</code>增加可执行权限（所有用户）</li>
<li><code>chmod -x xxx</code>：删除<code>xxx</code>的可执行权限（所有用户）</li>
<li><code>chmod 777 xxx</code>：给<code>xxx</code>权限改为777</li>
<li><code>chmod 777 xxx -R</code>：递归修改某个文件夹的权限为777</li>
</ul>
<p>权限由10位构成</p>
<ul>
<li>第1位：文件类型<ul>
<li><code>d</code>是目录</li>
<li><code>f</code>是文件</li>
<li><code>l</code>是链接</li>
</ul>
</li>
<li>第2~4位：用户的读写执权限<code>rwx</code></li>
<li>第5~7位：同组用户的读写执权限<code>rwx</code></li>
<li>第8~10位：其它用户的读写执权限<code>rwx</code></li>
</ul>
<p><code>777</code>指所用用户可读可写可执行。</p>
<h4 id="7-3-3-文件检索"><a href="#7-3-3-文件检索" class="headerlink" title="7.3.3 文件检索"></a>7.3.3 文件检索</h4><ul>
<li><code>find directory -name &#39;*.py&#39;</code>：在<code>directory</code>下搜索所有<code>*.py</code>文件</li>
<li><code>grep xxx</code>：从<code>stdin</code>读入若干行，如果行中包含<code>xxx</code>，则输出该行，否则跳过</li>
<li><code>wc</code>：统计<code>stdin</code>内容或文件参数列表中各文件的内容<ul>
<li><code>wc -l</code>：统计行数</li>
<li><code>wc -w</code>：统计单词书</li>
<li><code>wc -c</code>：统计字节数</li>
</ul>
</li>
<li><code>tree</code>：展示当前目录的文件结构<ul>
<li><code>tree directory</code>： 展示目录<code>directory</code>的文件结构</li>
<li><code>tree -a</code>：显示隐藏文件</li>
</ul>
</li>
<li><code>ag xxx</code>：搜索当前目录下所有文件，检索<code>xxx</code>字符串，并给出所在文件和所在行号</li>
<li><code>cut</code>：从<code>stdin</code>读入多行数据分割<ul>
<li>按指定字符分割<code>-d</code>，按列提取<code>-f</code><ul>
<li><code>echo $PATH | cut -d &#39;:&#39; -f 3,5</code>：输出<code>PATH</code>用<code>:</code>分割后第3、5列数据</li>
<li><code>echo $PATH | cut -d &#39;:&#39; -f 3-5</code>：输出<code>PATH</code>用<code>:</code>分割后第3~5列数据</li>
</ul>
</li>
<li>按字符提取<code>-c</code><ul>
<li><code>echo $PATH | cut -c 3,5</code>：输出<code>PATH</code>的第3、5个字符</li>
<li><code>echo $PATH | cut -c 3-5</code>：输出<code>PATH</code>的第3~5个字符</li>
</ul>
</li>
</ul>
</li>
<li><code>sort</code>：按行进行字典排序<ul>
<li>可以从<code>stdin</code>读入多行数据</li>
<li>可以从命令行参数读取文件名列表</li>
</ul>
</li>
<li><code>xargs</code>：将<code>stdin</code>中的数据用空格或回车分割成命令行参数</li>
</ul>
<h4 id="7-3-4-查看文件内容"><a href="#7-3-4-查看文件内容" class="headerlink" title="7.3.4 查看文件内容"></a>7.3.4 查看文件内容</h4><ul>
<li><code>more</code>：浏览文件内容<ul>
<li><code>&lt;Enter&gt;</code>：下一行</li>
<li><code>&lt;Space&gt;</code>：下一页</li>
<li><code>b</code>：上一页</li>
<li><code>q</code>：退出</li>
</ul>
</li>
<li><code>less</code>：与<code>more</code>类似，功能更多<ul>
<li><code>&lt;Enter&gt;</code>：下一行</li>
<li><code>y</code>：上一行</li>
<li><code>&lt;Page Down&gt;</code>：下一页</li>
<li><code>&lt;Page Up&gt;</code>：上一页</li>
<li><code>q</code>：退出</li>
</ul>
</li>
<li><code>head -3 xxx</code>：展示<code>xxx</code>的前3行内容，支持<code>stdin</code>读入</li>
<li><code>tail -3 xxx</code>：展示<code>xxx</code>的最后3行内容，支持<code>stdin</code>读入</li>
</ul>
<h4 id="7-3-5-用户相关"><a href="#7-3-5-用户相关" class="headerlink" title="7.3.5 用户相关"></a>7.3.5 用户相关</h4><p><code>history</code>：展示当前用户的历史操作，内容在<code>~/.bash_history</code>中</p>
<h4 id="7-3-6-工具"><a href="#7-3-6-工具" class="headerlink" title="7.3.6 工具"></a>7.3.6 工具</h4><ul>
<li><code>md5sum</code>：计算<code>md5</code>哈希值<ul>
<li>可以从<code>stdin</code>读入内容</li>
<li>可以通过命令行参数传入文件名列表</li>
</ul>
</li>
<li><code>time command</code>：统计<code>command</code>的执行时间</li>
<li><code>ipython3</code>：交互式python3环境，可以当做计算器，或批量管理文件，可在里边执行<code>bash</code>——<code>! echo &quot;hello world&quot;</code></li>
<li><code>watch -n 0.1 command</code>：每0.1秒执行一次<code>command</code>命令</li>
<li><code>tar</code>：压缩文件<ul>
<li><code>tar -zcvf xxx.tar.gz /path/to/file/*</code>：把目录<code>/path/to/file/*</code>所有文件压缩到<code>xxx.tar.gz</code>中</li>
<li><code>tar -zxvf xxx.tar.gz</code>：解压缩</li>
</ul>
</li>
<li><code>diff xxx yyy</code>：查找文件<code>xxx</code>与<code>yyy</code>的不同点</li>
</ul>
<h4 id="7-3-7-安装软件"><a href="#7-3-7-安装软件" class="headerlink" title="7.3.7 安装软件"></a>7.3.7 安装软件</h4><ul>
<li><code>sudo command</code>：以<code>root</code>身份执行<code>command</code>命令</li>
<li><code>apt-get install xxx</code>：安装软件</li>
<li><code>pip install xxx --user --upgrade</code>：安装Python包</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/25/Linux%E7%AE%A1%E9%81%93%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" data-id="cm8sja97b00188ktb7tmsdzew" data-title="Linux管道、环境变量和常用命令" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Linux常用软件tmux和vim" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/25/Linux%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6tmux%E5%92%8Cvim/" class="article-date">
  <time class="dt-published" datetime="2024-12-25T11:55:24.000Z" itemprop="datePublished">2024-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/25/Linux%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6tmux%E5%92%8Cvim/">Linux常用软件tmux和vim</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="2-tmux和vim"><a href="#2-tmux和vim" class="headerlink" title="2 tmux和vim"></a>2 tmux和vim</h1><h3 id="2-1-tmux"><a href="#2-1-tmux" class="headerlink" title="2.1 tmux"></a>2.1 tmux</h3><p><strong>tmux优势</strong></p>
<ul>
<li>不需要本地编译器，只需要终端编译器</li>
<li>不用担心断网，自动恢复现场</li>
<li>分屏</li>
</ul>
<p>结构：tmux允许有多个session，一个session允许有多个window，一个window允许有多个pane</p>
<p>修饰键：&#96;ctrl b</p>
<p>通常修饰键的使用规则是，按下并释放后，再按其它键，而不是同时按下。</p>
<p><strong>键盘操作</strong></p>
<table>
<thead>
<tr>
<th align="center">操作</th>
<th align="center">快捷键</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">新建session</td>
<td align="center"><code>tmux</code></td>
<td align="center">在终端中输入，不能在tmux中嵌套</td>
</tr>
<tr>
<td align="center">左右分屏</td>
<td align="center">修饰键 <code>%</code></td>
<td align="center">把当前pane拆分成左右两部分</td>
</tr>
<tr>
<td align="center">上下分屏</td>
<td align="center">修饰键 <code>&quot;</code></td>
<td align="center">把当前pane拆分成上下两部分</td>
</tr>
<tr>
<td align="center">关闭当前pane</td>
<td align="center"><code>ctrl d</code></td>
<td align="center">如果没有pane，则关闭window；如果没有window，则关闭session</td>
</tr>
<tr>
<td align="center">选择相邻pane</td>
<td align="center">修饰键 <code>方向键</code></td>
<td align="center">选择界面汇中相邻的pane</td>
</tr>
<tr>
<td align="center">调整分割线</td>
<td align="center">修饰键 <code>方向键</code>（同时按下）</td>
<td align="center">调整pane分割线位置</td>
</tr>
<tr>
<td align="center">全屏</td>
<td align="center">修饰键 <code>z</code></td>
<td align="center">将当前pane全屏&#x2F;取消全屏</td>
</tr>
<tr>
<td align="center">挂起session</td>
<td align="center">修饰键 <code>d</code></td>
<td align="center">将当前session移至后台</td>
</tr>
<tr>
<td align="center">恢复session</td>
<td align="center"><code>tmux a</code></td>
<td align="center">打开挂起的session</td>
</tr>
<tr>
<td align="center">选择session</td>
<td align="center">修饰键 <code>s</code></td>
<td align="center">在此模式下，上下方向键选择session，左右方向键展开和闭合当前项</td>
</tr>
<tr>
<td align="center">新建window</td>
<td align="center">修饰键 <code>c</code></td>
<td align="center">在当前session新建window</td>
</tr>
<tr>
<td align="center">选择window</td>
<td align="center">修饰键 <code>w</code></td>
<td align="center">与选择session的界面一样，只是所有session只展开到window层次</td>
</tr>
<tr>
<td align="center">翻页</td>
<td align="center">修饰键 <code>PageUp</code>或<code>PageDown</code></td>
<td align="center">当前pane向上&#x2F;向下翻页</td>
</tr>
<tr>
<td align="center">复制</td>
<td align="center">修饰键 <code>[</code></td>
<td align="center">需提前选中文字</td>
</tr>
<tr>
<td align="center">粘贴</td>
<td align="center">修饰键 <code>]</code></td>
<td align="center">粘贴到当前光标处</td>
</tr>
</tbody></table>
<p><strong>鼠标操作</strong></p>
<ul>
<li>鼠标可选中要使用的pane</li>
<li>鼠标可移动pane分割线</li>
<li>鼠标滚轮可翻阅当前pane</li>
<li>需要按住<code>shift</code>才能选中文本</li>
</ul>
<p><strong>关闭window</strong></p>
<ul>
<li>在非<code>tmux</code>终端输入<code>tmux ls</code>查看当前开启的window及其<code>id</code></li>
<li>用命令<code>tmux kill-window -t id</code>关闭编号为<code>id</code>的窗口</li>
</ul>
<h3 id="2-2-vim"><a href="#2-2-vim" class="headerlink" title="2.2 vim"></a>2.2 vim</h3><p>不使用鼠标的编辑器</p>
<p><strong>三种模式</strong></p>
<ul>
<li>一般命令模式：按不同键执行不同的功能</li>
<li>编辑模式：类似文本编辑器</li>
<li>命令行模式：按<code>:/?</code>任意一个即可进入，用于实现查找、替换、保存、退出</li>
</ul>
<p><strong>一般命令模式的操作</strong></p>
<table>
<thead>
<tr>
<th align="center">操作</th>
<th align="center">快捷键</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center">进入编辑模式</td>
<td align="center"><code>i</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">退出当前模式</td>
<td align="center"><code>&lt;ESC&gt;</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">移动光标</td>
<td align="center"><code>h</code> <code>j</code> <code>k</code> <code>l</code></td>
<td align="center">左下上右</td>
</tr>
<tr>
<td align="center">光标右移n个字符</td>
<td align="center"><code>n&lt;space&gt;</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">光标下移n行</td>
<td align="center"><code>n&lt;enter&gt;</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">跳到行首</td>
<td align="center"><code>0</code>或<code>^</code></td>
<td align="center"><code>0</code>跳转到当前行的第一个非空字符；<code>^</code>跳转到当前行的第一个字符</td>
</tr>
<tr>
<td align="center">跳到行尾</td>
<td align="center"><code>$</code></td>
<td align="center">跳转到当前行的最后一个字符</td>
</tr>
<tr>
<td align="center">跳到最后一行</td>
<td align="center"><code>G</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">跳到第<code>n</code>行</td>
<td align="center"><code>:n</code>或<code>nG</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">跳到第一行</td>
<td align="center"><code>gg</code></td>
<td align="center">等价于<code>1G</code></td>
</tr>
<tr>
<td align="center">向下查找word</td>
<td align="center"><code>/word</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">向上查找word</td>
<td align="center"><code>?word</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">重复执行上一个<strong>查找</strong>操作</td>
<td align="center"><code>n</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">反向重复执行上一个<strong>查找</strong>操作</td>
<td align="center"><code>N</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">指定行范围替换</td>
<td align="center"><code>:n1,n2s/word1/word2/g</code></td>
<td align="center">在$n_1$行和$n_2$行之间查找字符串word1，并全部替换成word2</td>
</tr>
<tr>
<td align="center">无确认全文替换</td>
<td align="center"><code>:1,$s/word1/word2/g</code></td>
<td align="center">把全文中的word1全部替换很word2，无需确认</td>
</tr>
<tr>
<td align="center">有确认全文替换</td>
<td align="center"><code>:1,$s/word1/word2/gc</code></td>
<td align="center">把全文中的word1全部替换很word2，需确认</td>
</tr>
<tr>
<td align="center">进入字符选择模式</td>
<td align="center"><code>v</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删除当前字符</td>
<td align="center"><code>d</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">删除当前行</td>
<td align="center"><code>dd</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">复制</td>
<td align="center"><code>y</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">复制当前行</td>
<td align="center"><code>yy</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">粘贴</td>
<td align="center"><code>p</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">撤销</td>
<td align="center"><code>u</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">重做</td>
<td align="center"><code>ctrl r</code></td>
<td align="center">取消撤销</td>
</tr>
<tr>
<td align="center">文本缩进</td>
<td align="center"><code>&lt;</code> <code>&gt;</code></td>
<td align="center">分别对应左右缩进，需要提前选中文本</td>
</tr>
<tr>
<td align="center">保存</td>
<td align="center"><code>:w</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">强制保存</td>
<td align="center"><code>:w!</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">退出</td>
<td align="center"><code>:q</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">强制退出</td>
<td align="center"><code>:q!</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">保存并退出</td>
<td align="center"><code>:wq</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">无缩进粘贴模式</td>
<td align="center"><code>:set paste</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">有缩进粘贴模式</td>
<td align="center"><code>:set nopaste</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">显示行号</td>
<td align="center"><code>nu</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">隐藏行号</td>
<td align="center"><code>nonu</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">全文代码格式化</td>
<td align="center"><code>gg=G</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">关闭查找高亮</td>
<td align="center"><code>:noh</code></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">中断当前命令</td>
<td align="center"><code>ctrl q</code></td>
<td align="center"></td>
</tr>
</tbody></table>
<p>当无法打开某个文件时</p>
<ul>
<li>关闭打开该文件的进程</li>
<li>删除该文件对应的swp文件</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/25/Linux%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6tmux%E5%92%8Cvim/" data-id="cm8sja97b00148ktbdoyy9q6o" data-title="Linux常用软件tmux和vim" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Linux常用文件管理命令" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/25/Linux%E5%B8%B8%E7%94%A8%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4/" class="article-date">
  <time class="dt-published" datetime="2024-12-25T11:54:54.000Z" itemprop="datePublished">2024-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/25/Linux%E5%B8%B8%E7%94%A8%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4/">Linux常用文件管理命令</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-常用文件管理命令"><a href="#1-常用文件管理命令" class="headerlink" title="1 常用文件管理命令"></a>1 常用文件管理命令</h1><hr>
<h3 id="1-1-常用Linux命令"><a href="#1-1-常用Linux命令" class="headerlink" title="1.1 常用Linux命令"></a>1.1 常用Linux命令</h3><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">功能</th>
<th align="center">备注</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>ls</code></td>
<td align="center">列举目录</td>
<td align="center"><strong>参数</strong>：<code>-l</code>显示详细信息；<code>-h</code>显示空间大小单位，常和<code>-l</code>一起使用；<code>-a</code>显示隐藏文件。蓝色是文件夹，白色是普通文件，绿色是可执行文件。</td>
</tr>
<tr>
<td align="center"><code>pwd</code></td>
<td align="center">显示当前目录</td>
<td align="center">当前目录名较长时使用</td>
</tr>
<tr>
<td align="center"><code>cd</code></td>
<td align="center">切换目录</td>
<td align="center">不带参数切换回家目录<code>~</code>，等价于命令<code>cd ~</code>；<strong>参数</strong>：<code>.</code>当前目录；<code>~</code>家目录<code>home</code>；<code>-</code>上次使用的目录；<code>..</code>上一级目录；<code>/</code>根目录；<code>\</code>相对路径分隔符</td>
</tr>
<tr>
<td align="center"><code>cp</code></td>
<td align="center">复制粘贴</td>
<td align="center">① <code>cp</code> &lt;源文件路径&gt; &lt;目的文件路径&gt; ② 可用通配符描述路径，<code>*</code>表示任意多字符，<code>?</code>表示任意一个字符 ③ 可用参数<code>-r</code>递归复制文件夹</td>
</tr>
<tr>
<td align="center"><code>mv</code></td>
<td align="center">移动</td>
<td align="center">① <code>mv</code> &lt;源文件路径&gt; &lt;目的文件路径&gt; ② 可实现重命名 ③ 可用通配符描述文件</td>
</tr>
<tr>
<td align="center"><code>mkdir</code></td>
<td align="center">创建文件夹</td>
<td align="center">① <code>mkdir</code> &lt;文件夹1&gt; &lt;文件夹2&gt; … ② 默认递归创建文件夹（连续创建）</td>
</tr>
<tr>
<td align="center"><code>touch</code></td>
<td align="center">创建文件</td>
<td align="center"><code>touch</code> &lt;文件名&gt;</td>
</tr>
<tr>
<td align="center"><code>rm</code></td>
<td align="center">删除</td>
<td align="center">① 删除目录需要参数<code>-d</code>；② 递归删除需要参数<code>-r</code>；③ 可用通配符描述删除的文件或路径</td>
</tr>
<tr>
<td align="center"><code>cat</code></td>
<td align="center">显示文件内容</td>
<td align="center"><code>cat</code> &lt;文件名&gt;</td>
</tr>
</tbody></table>
<p>可用<code>ll</code>代替<code>ls -l</code>，同理可用<code>ll -h</code>代替<code>ls -lh</code></p>
<h3 id="1-2-常用Linux快捷键"><a href="#1-2-常用Linux快捷键" class="headerlink" title="1.2 常用Linux快捷键"></a>1.2 常用Linux快捷键</h3><p><code>ctrl u</code>清空本行</p>
<p><code>ctrl c</code>停止命令并换行</p>
<p><code>tab</code>补全命令或文件名</p>
<p><code>ctrl insert</code>复制文本</p>
<p><code>shift insert</code>粘贴文本</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/25/Linux%E5%B8%B8%E7%94%A8%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4/" data-id="cm8sja97a00118ktb5qx0g6ws" data-title="Linux常用文件管理命令" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式-单例模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-12-25T11:03:51.000Z" itemprop="datePublished">2024-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">设计模式-单例模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><p>单例模式(Singleton Pattern)是中最简单的设计模式之一。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式。</p>
<p>这种模式涉及到一个单一的类，该类负责创建自己的对象，同时确保只有单个对象被创建。这个类提供了一种访问其唯一的对象的方式，可以直接访问，不需要实例化该类的对象。</p>
<p>单例模式是一种创建型设计模式，它确保一个类只有一个实例，并提供了一个全局访问点来访问该实例。</p>
<p>注意：</p>
<p>1、单例类只能有一个实例。<br>2、单例类必须自己创建自己的唯一实例。<br>3、单例类必须给所有其他对象提供这一实例。</p>
<h1 id="主要解决"><a href="#主要解决" class="headerlink" title="主要解决"></a>主要解决</h1><p>频繁创建和销毁全局使用的类实例的问题。</p>
<h1 id="何时使用"><a href="#何时使用" class="headerlink" title="何时使用"></a>何时使用</h1><p>当需要控制实例数目，节省系统资源时。</p>
<h1 id="类图示例"><a href="#类图示例" class="headerlink" title="类图示例"></a>类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/25/676bf07a5330a.png" alt="单例模式.png"></p>
<h1 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingleObject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SingleObject</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleObject</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingleObject</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingleObject <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//不能使用构造函数</span></span><br><span class="line">        <span class="comment">//SingleObject s1 = new SingleObject();</span></span><br><span class="line">        <span class="type">SingleObject</span> <span class="variable">s1</span> <span class="operator">=</span> SingleObject.getInstance();</span><br><span class="line">        s1.showMessage();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="单例模式的几种实现方式"><a href="#单例模式的几种实现方式" class="headerlink" title="单例模式的几种实现方式"></a>单例模式的几种实现方式</h1><h2 id="懒汉式-只有使用时才会加载实例-，线程不安全"><a href="#懒汉式-只有使用时才会加载实例-，线程不安全" class="headerlink" title="懒汉式(只有使用时才会加载实例)，线程不安全"></a>懒汉式(只有使用时才会加载实例)，线程不安全</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingleObject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingleObject instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingleObject</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingleObject <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">SingleObje</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="懒汉式-只有使用时才会加载实例-，线程安全"><a href="#懒汉式-只有使用时才会加载实例-，线程安全" class="headerlink" title="懒汉式(只有使用时才会加载实例)，线程安全"></a>懒汉式(只有使用时才会加载实例)，线程安全</h2><p>使用加锁的方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingleObject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingleObject instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingleObject</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> SingleObject <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="literal">null</span>)&#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">SingleObject</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="饿汉式-加载类的时候就实例化"><a href="#饿汉式-加载类的时候就实例化" class="headerlink" title="饿汉式(加载类的时候就实例化)"></a>饿汉式(加载类的时候就实例化)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingleObject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SingleObject</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleObject</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingleObject</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingleObject <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="双重锁"><a href="#双重锁" class="headerlink" title="双重锁"></a>双重锁</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SingleObject</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SingleObject instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SingleObject</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SingleObject <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (SingleObject.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">SingleObject</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="模式分析"><a href="#模式分析" class="headerlink" title="模式分析"></a>模式分析</h1><p>单例模式的目的是保证一个类仅有一个实例，并提供一个访问它的全局访问点。单例模式包含的角色只有一个就是单例类。单例模式拥有一个私有构造函数，确保用户无法通过new直接实例化。</p>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ol>
<li>节省资源：单例模式通过确保一个类只有一个实例来避免重复创建对象，从而节省了内存和计算资源。这对于需要频繁创建和销毁对象的场景特别有用。</li>
<li>全局访问：单例模式提供了一个全局访问点来访问该类的实例，这使得在程序的任何地方都可以方便地获取和使用该实例。</li>
<li>控制实例数量：通过单例模式，可以严格控制一个类在内存中的实例数量，从而避免因为多个实例导致的资源竞争和数据不一致等问题。</li>
<li>简化管理：由于只有一个实例，因此可以更容易地管理和维护该实例的状态和行为，特别是在需要跟踪和记录实例变化的情况下。</li>
</ol>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ol>
<li>单例类的职责过重：如果单例类承担了过多的职责，会导致代码结构复杂，难以维护和扩展。这违反了<a target="_blank" rel="noopener" href="https://www.lzhiscoding.xyz/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AE%80%E4%BB%8B/">单一职责原则</a>，即一个类应该只有一个引起它变化的理由。</li>
<li>线程安全问题：在多线程环境下，如果没有正确实现同步机制，可能会导致多个实例被创建。虽然可以通过加锁等方式来解决这个问题，但会增加代码的复杂性和执行开销。</li>
<li>难以测试：由于单例类的实例在程序中是唯一的，因此很难对其进行单元测试。这通常需要使用特殊的测试技巧，如依赖注入、模拟（mock）等。</li>
<li>依赖关系：单例模式可能导致代码之间的紧密依赖关系，特别是当多个类依赖于同一个单例实例时。这种依赖关系会增加代码的耦合度，降低系统的灵活性和可维护性。</li>
<li>扩展困难：如果需要在程序中引入新的单例类，或者需要修改现有单例类的行为，可能会涉及到大量的代码修改和测试工作。这增加了系统扩展和维护的难度。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/25/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" data-id="cm8sja981004r8ktb2rcr4dv0" data-title="设计模式-单例模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-git使用教程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/24/git%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2024-12-24T11:39:13.000Z" itemprop="datePublished">2024-12-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/git/">git</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/24/git%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">git使用教程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="5-Git"><a href="#5-Git" class="headerlink" title="5 Git"></a>5 Git</h1><h3 id="5-1-基本概念"><a href="#5-1-基本概念" class="headerlink" title="5.1 基本概念"></a>5.1 基本概念</h3><p>常用的远程仓库有<code>GitHub</code>和<code>Gitee</code></p>
<p>工作区：仓库的目录，独立于各个分支。</p>
<p>暂存区：数据暂时存放的区域，可看做工作区写入版本库之前的缓冲区，它独立于各个分支。</p>
<p>版本库：存放所有已经提交到本地仓库的代码版本。</p>
<p>版本结构：树结构，树中每个结点代表一个代码版本。</p>
<h3 id="5-2-本地命令"><a href="#5-2-本地命令" class="headerlink" title="5.2 本地命令"></a>5.2 本地命令</h3><h4 id="5-2-1-配置git账户"><a href="#5-2-1-配置git账户" class="headerlink" title="5.2.1 配置git账户"></a>5.2.1 配置git账户</h4><p>配置文件位于<code>~/.gitconfig</code>中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name xxx  # 全局用户名</span><br><span class="line">git config --global user.email xxx@xxx.com  # 全局邮箱</span><br></pre></td></tr></table></figure>

<h4 id="5-2-2-初始化"><a href="#5-2-2-初始化" class="headerlink" title="5.2.2 初始化"></a>5.2.2 初始化</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<h4 id="5-2-3-暂存区操作"><a href="#5-2-3-暂存区操作" class="headerlink" title="5.2.3 暂存区操作"></a>5.2.3 暂存区操作</h4><p>查看暂存区状态，红色表示被修改的文件，绿色表示被修改，但已添加到暂存区。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>

<p>添加文件到暂存区</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add filename  # 添加文件filename到暂存区</span><br><span class="line">git add .   # 添加所有文件到暂存区</span><br></pre></td></tr></table></figure>

<p>提交到本地版本库，同时<code>HEAD</code>指针指向该版本结点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;备注&quot;</span><br></pre></td></tr></table></figure>

<p>对比暂存区的文件版本，如果一致，则不显示。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff filename</span><br></pre></td></tr></table></figure>

<p>删除暂存区中文件，让该文件不被管理，此时不会删除工作区的文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached filename</span><br><span class="line">git restore --staged filename  # 相同效果</span><br></pre></td></tr></table></figure>

<p>工作区文件<code>filename</code>回滚到暂存区版本，如果暂存区没有版本，则回滚到<code>HEAD</code>版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git restore filename</span><br></pre></td></tr></table></figure>

<h4 id="5-2-4-版本库操作"><a href="#5-2-4-版本库操作" class="headerlink" title="5.2.4 版本库操作"></a>5.2.4 版本库操作</h4><p>查看版本库，最上边是最新版本，最下边是最旧的版本。如果版本过多，需要按<code>q</code>才能退出。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>

<p>也可用参数<code>--pretty=oneline</code>设置为单行显示，此时每一行只有版本号和版本信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=oneline</span><br></pre></td></tr></table></figure>

<p>恢复以前版本，版本号可这么指定。</p>
<ul>
<li><code>HEAD^</code>表示上一个版本，<code>HEAD^^</code>表示上上个版本，以此类推</li>
<li><code>HEAD~100</code>表示上100个版本</li>
<li><code>xxxxx</code>表示特定版本，可通过<code>git log</code>查看版本号，只需填入前6位就能回滚。实际上不一定是旧版本，也可是新版本</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure>

<p>注意，回滚后，并不会删除新版本结点，依然可以通过新版本号恢复到较新的版本，若不记得新版本号，可通过以下命令查看<code>HEAD</code>移动过的结点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure>

<h3 id="5-3-远程版本库操作"><a href="#5-3-远程版本库操作" class="headerlink" title="5.3 远程版本库操作"></a>5.3 远程版本库操作</h3><p>在<code>gitee</code>注册账号，然后创建项目，填写项目名称、项目描述，取消勾选“使用自述文件初始化仓库”。</p>
<p>在<code>gitee</code>配置SSH，填入服务器的SSH公钥，位于<code>~/.ssh/id_rsa.pub</code>。</p>
<p><strong>绑定远程仓库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitee.com:lzhiscoding/test.git</span><br></pre></td></tr></table></figure>

<p>其中<code>git remote add origin git@gitee.com:lzhiscoding/test.git</code>可解读为<code>服务器用户名@服务器域名:你的用户名/项目名.git</code>，使用<code>ssh</code>方式连接与传输。</p>
<p><strong>推送到远程版本库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git push -u origin branch_name  # 首次推送分支branch_name到服务器，例如master分支</span><br><span class="line">git push origin branch_name  # 非首次推送分支branch_name到服务器，例如master分支</span><br></pre></td></tr></table></figure>

<p>云端可通过”历史“浏览以前的代码，比本地浏览方便。</p>
<p>克隆版本库，几乎一样，只是缺少了引用记录，即<code>git reflog</code>找不到曾经的引用记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@gitee.com:lzhiscoding/test.git</span><br></pre></td></tr></table></figure>

<h3 id="5-4-分支命令"><a href="#5-4-分支命令" class="headerlink" title="5.4 分支命令"></a>5.4 分支命令</h3><h4 id="5-4-1-创建分支"><a href="#5-4-1-创建分支" class="headerlink" title="5.4.1 创建分支"></a>5.4.1 创建分支</h4><p>在<code>HEAD</code>指针方向创建分支<code>dev</code>，但没有产生新结点，但<code>commit</code>和<code>push</code>会到新分支上</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b dev</span><br></pre></td></tr></table></figure>

<p>用<code>branch</code>命令可以查看所有分支，<code>*</code>号对应的是当前分支。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure>

<h4 id="5-4-2-分支操作"><a href="#5-4-2-分支操作" class="headerlink" title="5.4.2 分支操作"></a>5.4.2 分支操作</h4><p><strong>切换分支</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout branch_name</span><br></pre></td></tr></table></figure>

<p><strong>合并分支</strong></p>
<p>把分支<code>branch_name</code>的最新版本合并到当前分支的当前结点上（<code>HEAD</code>指向的结点），默认为快速合并，即让<code>HEAD</code>直接指向分支<code>branch_name</code>的最新版本，分支<code>branch_name</code>的所有结点归属于当前分支。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge branch_name</span><br></pre></td></tr></table></figure>

<p>如果不想执行快速合并，可用参数<code>-no-ff</code>。</p>
<p>如果出现冲突，则会提示合并失败，此时可通过<code>git status</code>查看冲突情况，冲突部分会用<code>both</code>提示，然后打开该文件，<code>&lt;&lt;&lt;&lt;&lt;&lt;</code>和<code>======</code>包围的部分是当前分支的内容，<code>======</code>和<code>&gt;&gt;&gt;&gt;&gt;&gt;</code>包围的是被合并分支的内容，根据实际情况，修改当前文件，包括删除<code>&lt;&lt;&lt;&lt;&lt;&lt;</code>、<code>======</code>和<code>&gt;&gt;&gt;&gt;&gt;&gt;</code>，使得文件正常即可。然后再<code>commit</code>，就能产生一个合并的版本。</p>
<p><strong>删除分支</strong></p>
<p>删除分支，并把其结点后继到<code>HEAD</code>之后，但不影响云端的分支。一般合并完后可以选择删除分支。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d branch_name</span><br></pre></td></tr></table></figure>

<h4 id="5-4-3-云端分支操作"><a href="#5-4-3-云端分支操作" class="headerlink" title="5.4.3 云端分支操作"></a>5.4.3 云端分支操作</h4><p><strong>提交分支到云端</strong></p>
<p>如果云端没有分支<code>branch_name</code>，则不能省略<code>branch_name</code>而直接<code>git push</code>，这样需要用参数<code>--set-upstream</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --set-upstream origin branch_name</span><br></pre></td></tr></table></figure>

<p>当然也可以直接指定<code>branch_name</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin branch_name</span><br></pre></td></tr></table></figure>

<p><strong>删除云端分支</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d origin branch_name</span><br></pre></td></tr></table></figure>

<p><strong>下载云端分支</strong></p>
<p><strong>方式1</strong></p>
<p>假设云端分支叫<code>dev</code>，需要下载到本地的分支<code>dev</code>。</p>
<p>首先需要绑定二者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --set-upstream-to=origin/dev dev</span><br></pre></td></tr></table></figure>

<p>然后下载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure>

<p><strong>方式2</strong></p>
<p>直接<code>pull</code>，但不能修改下载后的分支名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin branch_name</span><br></pre></td></tr></table></figure>

<h3 id="5-5-栈命令"><a href="#5-5-栈命令" class="headerlink" title="5.5 栈命令"></a>5.5 栈命令</h3><p>如果遇到bug，需要创建新分支修bug，但目前的工作区和暂存区都已经修改，又不想提交到版本库了，这时可以先将工作区和暂存区保存到<code>stash</code>里，并清空当前工作区和暂存区。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure>

<p>获取栈顶内容，但不删除栈顶，类似<code>top()</code>操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure>

<p>获取栈顶内容，同时删除栈顶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<p>只删除栈顶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop</span><br></pre></td></tr></table></figure>

<p>查看栈中所有元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/24/git%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" data-id="cm8sja97w00478ktbfz5i75dk" data-title="git使用教程" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式-原型模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-12-24T04:53:31.000Z" itemprop="datePublished">2024-12-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/">设计模式-原型模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="深克隆和浅克隆"><a href="#深克隆和浅克隆" class="headerlink" title="深克隆和浅克隆"></a>深克隆和浅克隆</h1><p>在了解原型模式前先了解一下深克隆和浅克隆</p>
<h2 id="浅克隆"><a href="#浅克隆" class="headerlink" title="浅克隆"></a>浅克隆</h2><p>浅拷贝是一种对象复制方式，其中只复制对象的成员变量值，而不复制它们所指向的资源。这意味着多<br>个对象可能会共享相同的资源，包括动态分配的内存、文件句柄等。</p>
<h2 id="深克隆"><a href="#深克隆" class="headerlink" title="深克隆"></a>深克隆</h2><p>深拷贝是一种对象复制方式，其中对象的成员变量值被复制，同时资源也被复制，每个对象都有自己独<br>立的资源副本。这确保了对象之间的数据独立性，不会相互干扰。深拷贝通常需要手动实现拷贝构造函<br>数和拷贝赋值运算符。</p>
<h2 id="代码验证"><a href="#代码验证" class="headerlink" title="代码验证"></a>代码验证</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="type">char</span>* data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 默认构造函数，动态分配内存并初始化</span></span><br><span class="line">    <span class="built_in">MyClass</span>() &#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">10</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            data[i] = <span class="string">&#x27;A&#x27;</span> + i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拷贝构造函数</span></span><br><span class="line">    <span class="built_in">MyClass</span>(<span class="type">const</span> MyClass&amp; other, <span class="type">bool</span> deepCopy) : <span class="built_in">data</span>(<span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="comment">//如果是深拷贝</span></span><br><span class="line">        <span class="keyword">if</span> (deepCopy) &#123;</span><br><span class="line">            data = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">10</span>];</span><br><span class="line">            std::<span class="built_in">memcpy</span>(data, other.data, <span class="number">10</span>);</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Deep copy constructor called. Each object will have its own memory.\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果是浅拷贝</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            data = other.data;</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Shallow copy logic used within deep copy constructor (for demonstration purposes only).\n&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    // 析构函数，释放内存</span></span><br><span class="line"><span class="comment">    ~MyClass() &#123;</span></span><br><span class="line"><span class="comment">        delete[] data;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印数据内容（用于验证数据是否正确）</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            std::cout &lt;&lt; data[i];</span><br><span class="line">        &#125;</span><br><span class="line">        std::cout &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打印指针的地址和数据所指向的内存地址</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">printAddresses</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Address of data member (pointer variable): &quot;</span> &lt;&lt; &amp;data &lt;&lt; std::endl;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Address pointed to by data: &quot;</span> &lt;&lt; <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(data) &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyClass obj1;</span><br><span class="line">    obj<span class="number">1.</span><span class="built_in">printAddresses</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 浅拷贝</span></span><br><span class="line">    <span class="function">MyClass <span class="title">obj2</span><span class="params">(obj1,<span class="literal">false</span>)</span></span>;</span><br><span class="line">    obj<span class="number">2.</span><span class="built_in">printAddresses</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 验证浅拷贝：两者应该打印相同的数据所指向的内存地址</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Comparing addresses pointed to by obj1.data and obj2.data (shallow copy):\n&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;obj1.data points to: &quot;</span> &lt;&lt; <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(obj<span class="number">1.</span>data) &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;obj2.data points to: &quot;</span> &lt;&lt; <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(obj<span class="number">2.</span>data) &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 深拷贝</span></span><br><span class="line">    <span class="function">MyClass <span class="title">obj3</span><span class="params">(obj1, <span class="literal">true</span>)</span></span>;</span><br><span class="line">    obj<span class="number">3.</span><span class="built_in">printAddresses</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 验证深拷贝：两者应该打印不同的数据所指向的内存地址</span></span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Comparing addresses pointed to by obj1.data and obj3.data (deep copy):\n&quot;</span>;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;obj1.data points to: &quot;</span> &lt;&lt; <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(obj<span class="number">1.</span>data) &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;obj3.data points to: &quot;</span> &lt;&lt; <span class="built_in">static_cast</span>&lt;<span class="type">void</span>*&gt;(obj<span class="number">3.</span>data) &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="https://www.helloimg.com/i/2024/12/24/676a82e0e5331.png" alt="深拷贝浅拷贝.png"></p>
<p>如果解除析构函数的注释则会报错，原因是因为浅拷贝obj2所指向的地址在obj1的析构函数里释放掉了</p>
<h1 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h1><p>原型模式（Prototype Pattern）是用于创建重复的对象，同时又能保证性能。这种类型的设计模式属于创建型模式，它提供了一种创建对象的最佳方式之一。</p>
<p>这种模式是实现了一个原型接口，该接口用于创建当前对象的克隆。当直接创建对象的代价比较大时，则采用这种模式。例如，一个对象需要在一个高代价的数据库操作之后被创建。我们可以缓存该对象，在下一个请求时返回它的克隆，在需要的时候更新数据库，以此来减少数据库调用。</p>
<h1 id="何时使用"><a href="#何时使用" class="headerlink" title="何时使用"></a>何时使用</h1><p>系统应独立于产品的创建、构成和表示。<br>需要在运行时指定实例化的类，例如通过动态加载。<br>避免创建与产品类层次平行的工厂类层次。<br>类的实例只能有几种不同状态组合，克隆原型比手工实例化更方便。</p>
<h1 id="如何解决"><a href="#如何解决" class="headerlink" title="如何解决"></a>如何解决</h1><p>通过已有的一个原型对象，快速生成与原型对象相同的实例。</p>
<h1 id="类图示例"><a href="#类图示例" class="headerlink" title="类图示例"></a>类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/24/676a83a58d7aa.png" alt="原型模式.png"></p>
<p>在原型模式结构中定义了一个抽象原型类，所有的Java类都继承自java.lang.Object，而Object类提供一个clone()方法，可以将一个Java对象复制一份。因此在Java中可以,直接使用Object提供的clone()方法来实现对象的克隆，Java语言中的原型模式实现很简单</p>
<h1 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h1><p>简历复制</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Resume</span> <span class="keyword">implements</span> <span class="title class_">Cloneable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="keyword">private</span> String timeArea;</span><br><span class="line">    <span class="keyword">private</span> String company;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Resume</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPersonalInfo</span><span class="params">(String sex, String age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPersonalExperience</span><span class="params">(String timeArea, String company)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.timeArea = timeArea;</span><br><span class="line">        <span class="built_in">this</span>.company = company;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Display</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Name: &quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;Age: &quot;</span> + age);</span><br><span class="line">        System.out.println(<span class="string">&quot;sex: &quot;</span> + sex);</span><br><span class="line">        System.out.println(<span class="string">&quot;timeArea: &quot;</span> + timeArea);</span><br><span class="line">        System.out.println(<span class="string">&quot;company: &quot;</span> + company);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="comment">// 调用Object类的clone()方法创建当前对象的浅拷贝</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Prototype</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException &#123;</span><br><span class="line">        <span class="type">Resume</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Resume</span>(<span class="string">&quot;zhang3&quot;</span>);</span><br><span class="line">        a.setPersonalInfo(<span class="string">&quot;male&quot;</span>, <span class="string">&quot;20&quot;</span>);</span><br><span class="line">        a.setPersonalExperience(<span class="string">&quot;2004-2008&quot;</span>, <span class="string">&quot;XX公司&quot;</span>);</span><br><span class="line">        <span class="type">Resume</span> <span class="variable">b</span> <span class="operator">=</span> (Resume) a.clone();</span><br><span class="line">        b.setPersonalExperience(<span class="string">&quot;2004-2006&quot;</span>, <span class="string">&quot;YY&quot;</span>);</span><br><span class="line">        <span class="type">Resume</span> <span class="variable">c</span> <span class="operator">=</span> (Resume) a.clone();</span><br><span class="line">        c.setPersonalInfo(<span class="string">&quot;female&quot;</span>, <span class="string">&quot;28&quot;</span>);</span><br><span class="line">        a.Display();</span><br><span class="line">        b.Display();</span><br><span class="line">        c.Display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="原型模式包含如下角色"><a href="#原型模式包含如下角色" class="headerlink" title="原型模式包含如下角色"></a>原型模式包含如下角色</h1><ol>
<li>原型接口（Prototype Interface）：定义一个用于克隆自身的接口，通常包括一个 clone() 方法。</li>
<li>具体原型类（Concrete Prototype）：实现原型接口的具体类，负责实际的克隆操作。这个类需要实现 clone() 方法，通常使用浅拷贝或深拷贝来复制自身。</li>
<li>客户端（Client）：使用原型实例来创建新的对象。客户端调用原型对象的 clone() 方法来创建新的对象，而不是直接使用构造函数。</li>
</ol>
<h1 id="模式分析"><a href="#模式分析" class="headerlink" title="模式分析"></a>模式分析</h1><h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul>
<li>性能提高</li>
<li>避免构造函数的约束</li>
</ul>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>配备克隆方法需要全面考虑类的功能，对已有类可能较难实现，特别是处理不支持串行化的间接对象或含有循环结构的引用时。</li>
<li>必须实现 Cloneable 接口。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/" data-id="cm8sja98200538ktb6w5ohaut" data-title="设计模式-原型模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式-建造者模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-12-24T04:52:58.000Z" itemprop="datePublished">2024-12-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/">设计模式-建造者模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h1><p>建造者模式是一种创建型设计模式，它允许你创建复杂对象的步骤与表示方式相分离。<br>建造者模式是一种创建型设计模式，它的主要目的是将一个<strong>复杂对象</strong>的构建过程与其表示相分离，从而可以创建具有不同表示形式的对象。</p>
<h2 id="主要解决"><a href="#主要解决" class="headerlink" title="主要解决"></a>主要解决</h2><p>在软件系统中，一个复杂对象的创建通常由多个部分组成，这些部分的组合经常变化，但组合的算法相对稳定。</p>
<h2 id="何时使用"><a href="#何时使用" class="headerlink" title="何时使用"></a>何时使用</h2><p>当一些基本部件不变，而其组合经常变化时。</p>
<h2 id="如何解决"><a href="#如何解决" class="headerlink" title="如何解决"></a>如何解决</h2><p>将变与不变的部分分离开。</p>
<h1 id="类图示例"><a href="#类图示例" class="headerlink" title="类图示例"></a>类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/24/676a6caae9ede.png" alt="建造者模式.png"></p>
<h1 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h1><p>我们假设一个快餐店的商业案例，其中，一个典型的套餐可以是一个汉堡（Burger）和一杯冷饮（Cold drink）。汉堡（Burger）可以是素食汉堡（Veg Burger）或鸡肉汉堡（Chicken Burger），它们是包在纸盒中。冷饮（Cold drink）可以是可口可乐（coke）或百事可乐（pepsi），它们是装在瓶子中。<br>我们将创建一个表示食物条目（比如汉堡和冷饮）的 Item 接口和实现 Item 接口的实体类，以及一个表示食物包装的 Packing 接口和实现 Packing 接口的实体类，汉堡是包在纸盒中，冷饮是装在瓶子中。<br>然后我们创建一个 Meal 类，带有 Item 的 ArrayList 和一个通过结合 Item 来创建不同类型的 Meal 对象的 MealBuilder。BuilderPatternDemo 类使用 MealBuilder 来创建一个 Meal。</p>
<h2 id="设计类图"><a href="#设计类图" class="headerlink" title="设计类图"></a>设计类图</h2><p><img src="https://www.helloimg.com/i/2024/12/24/676a6db88ce83.png" alt="套餐建造者.png"></p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//表示食物条目的接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Packing <span class="title function_">packing</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//表示食物包装的接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Packing</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pack</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//食物放在包装袋</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Wrapper</span> <span class="keyword">implements</span> <span class="title class_">Packing</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pack</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Wrapper&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//饮料放在瓶子</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bottle</span> <span class="keyword">implements</span> <span class="title class_">Packing</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">pack</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Bottle&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//汉堡抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Burger</span> <span class="keyword">implements</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Packing <span class="title function_">packing</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Wrapper</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//饮料抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ColdDrink</span> <span class="keyword">implements</span> <span class="title class_">Item</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Packing <span class="title function_">packing</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bottle</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//蔬菜汉堡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VegetableBurger</span> <span class="keyword">extends</span> <span class="title class_">Burger</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">25</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Vegetable Burger&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//鸡肉汉堡</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChickenBurger</span> <span class="keyword">extends</span> <span class="title class_">Burger</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">30</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Chicken Burger&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可口可乐</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coke</span> <span class="keyword">extends</span> <span class="title class_">ColdDrink</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Coke&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//百事可乐</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Pepsi</span> <span class="keyword">extends</span> <span class="title class_">ColdDrink</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">price</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Pepsi&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Meal类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Meal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Item&gt; items = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Item&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addItem</span><span class="params">(Item item)</span> &#123;</span><br><span class="line">        items.add(item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCost</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cost</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Item item : items) &#123;</span><br><span class="line">            cost += item.price();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cost;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showItems</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Item item : items) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;Item: &quot;</span> + item.name());</span><br><span class="line">            System.out.print(<span class="string">&quot;, Packing: &quot;</span> + item.packing());</span><br><span class="line">            System.out.println(<span class="string">&quot;, Price: &quot;</span> + item.price());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//MealBuilder类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MealBuilder</span> &#123;</span><br><span class="line">    <span class="comment">//蔬菜汉堡套餐</span></span><br><span class="line">    <span class="keyword">public</span> Meal <span class="title function_">PrepareVegetableBurger</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Meal</span> <span class="variable">meal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Meal</span>();</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">VegetableBurger</span>());</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">Coke</span>());</span><br><span class="line">        <span class="keyword">return</span> meal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//鸡肉汉堡套餐</span></span><br><span class="line">    <span class="keyword">public</span> Meal <span class="title function_">prepareChickenBurger</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Meal</span> <span class="variable">meal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Meal</span>();</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">ChickenBurger</span>());</span><br><span class="line">        meal.addItem(<span class="keyword">new</span> <span class="title class_">Pepsi</span>());</span><br><span class="line">        <span class="keyword">return</span> meal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MealBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MealBuilder</span>();</span><br><span class="line">        <span class="type">Meal</span> <span class="variable">cb</span> <span class="operator">=</span> builder.prepareChickenBurger();</span><br><span class="line">        System.out.println(<span class="string">&quot;Chicken Burger: &quot;</span>);</span><br><span class="line">        cb.showItems();</span><br><span class="line">        System.out.println(<span class="string">&quot;Total cost: &quot;</span> + cb.getCost());</span><br><span class="line"></span><br><span class="line">        <span class="type">Meal</span> <span class="variable">vb</span> <span class="operator">=</span> builder.PrepareVegetableBurger();</span><br><span class="line">        System.out.println(<span class="string">&quot;Vegetable Burger: &quot;</span>);</span><br><span class="line">        vb.showItems();</span><br><span class="line">        System.out.println(<span class="string">&quot;Total cost: &quot;</span> + vb.getCost());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="建造者模式包含如下角色"><a href="#建造者模式包含如下角色" class="headerlink" title="建造者模式包含如下角色"></a>建造者模式包含如下角色</h1><ol>
<li>Builder（抽象建造者）,抽象建造者为创建一个产品Product对象的各个部件指定抽象接口，在该接口中一般声明两类方法，一类方法是buildPartX（），它们用于创建复杂对象的各个部件；另一类方法是getResult（），它们用于返回复杂对象。它既可以是抽象类，也可以是接口。</li>
<li>ConcreteBuilder（具体建造者）,具体建造者实现了Builder接口，实现各个部件的构造和装配方法，定义并明确它所创,建的复杂对象，也可以提供一个方法返回创建好的复杂产品对象。</li>
<li>Product（产品角色）,产品角色是被构建的复杂对象，包含多个组成部件，具体建造者创建该产品的内部表示,并定义它的装配过程。</li>
<li>Director（指挥者）,指挥者又称为导演类，它负责安排复杂对象的建造次序，指挥者与抽象建造者之间存在关联关系，可以在其construct（）建造方法中调用建造者对象的部件构造与装配方法，完成复杂对象的建造。客户端一般只需要与指挥者进行交互，在客户端确定具体建造者的类型, 并实例化具体建造者对象（也可以通过配置文件和反射机制），然后通过指挥者类的构造函数或者Setter方法将该对象传人指挥者类中。</li>
</ol>
<h1 id="模式分析"><a href="#模式分析" class="headerlink" title="模式分析"></a>模式分析</h1><h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul>
<li>分离构建过程和表示，使得构建过程更加灵活，可以构建不同的表示。</li>
<li>可以更好地控制构建过程，隐藏具体构建细节。<br>代码复用性高，可以在不同的构建过程中重复使用相同的建造者。</li>
</ul>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>如果产品的属性较少，建造者模式可能会导致代码冗余。</li>
<li>增加了系统的类和对象数量。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/24/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/" data-id="cm8sja98300568ktb8yxk9vnn" data-title="设计模式-建造者模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式-抽象工厂模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-12-23T12:00:55.000Z" itemprop="datePublished">2024-12-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/">设计模式-抽象工厂模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h1><p>抽象工厂模式是<a target="_blank" rel="noopener" href="https://www.lzhiscoding.xyz/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">工厂方法模式</a>的泛化版，工厂方法模式是一种特殊的抽象工厂模式。在抽象工厂模式中，每一个具体工厂可以生产多个具体产品。</p>
<h1 id="类图示例"><a href="#类图示例" class="headerlink" title="类图示例"></a>类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/23/6769607927d77.png" alt="抽象工厂模式.png"></p>
<h1 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h1><p>数据库工厂，由用户表和部门表，可以用SQLServer和Access数据库</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用户表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">GetId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">SetId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">GetName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">SetName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//部门表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">GetId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">SetId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">GetName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">SetName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象产品User</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IUser</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">GetUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品SqlserverUser类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SqlServerUser</span> <span class="keyword">implements</span> <span class="title class_">IUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在SQL server中给User表增加一条记录&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">GetUser</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在SQL server中根据ID得到User表一条记录&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品AccessUser类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AccessUser</span> <span class="keyword">implements</span> <span class="title class_">IUser</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在Access中给User表增加一条记录&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">GetUser</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在Access中根据ID得到User表一条记录&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象产品Department</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IDepartment</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(Department department)</span>;</span><br><span class="line"></span><br><span class="line">    Department <span class="title function_">GetDepartment</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品SqlServerDepartment类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SqlServerDepartment</span> <span class="keyword">implements</span> <span class="title class_">IDepartment</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(Department department)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在SQL server中给Department表增加一条记录&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Department <span class="title function_">GetDepartment</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在SQL server中根据ID得到Department表一条记录&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品AccessDepartment类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AccessDepartment</span> <span class="keyword">implements</span> <span class="title class_">IDepartment</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Insert</span><span class="params">(Department department)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在Access中给Department表增加一条记录&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Department <span class="title function_">GetDepartment</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在Access中根据ID得到Department表一条记录&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象工厂接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IFactory</span> &#123;</span><br><span class="line">    IUser <span class="title function_">createUser</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    IDepartment <span class="title function_">createDepartment</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体SqlServer工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SqlServerFactory</span> <span class="keyword">implements</span> <span class="title class_">IFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> IUser <span class="title function_">createUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SqlServerUser</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> IDepartment <span class="title function_">createDepartment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SqlServerDepartment</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体Access工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AccessFactory</span> <span class="keyword">implements</span> <span class="title class_">IFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> IUser <span class="title function_">createUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AccessUser</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> IDepartment <span class="title function_">createDepartment</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AccessDepartment</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AbstractFactory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="type">Department</span> <span class="variable">department</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Department</span>();</span><br><span class="line">        <span class="type">IFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlServerFactory</span>();</span><br><span class="line">        <span class="type">IUser</span> <span class="variable">iu</span> <span class="operator">=</span> factory.createUser();</span><br><span class="line">        iu.Insert(user);</span><br><span class="line">        iu.GetUser(<span class="number">1</span>);</span><br><span class="line">        <span class="type">IDepartment</span> <span class="variable">id</span> <span class="operator">=</span> factory.createDepartment();</span><br><span class="line">        id.Insert(department);</span><br><span class="line">        id.GetDepartment(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="该例子的类图示例"><a href="#该例子的类图示例" class="headerlink" title="该例子的类图示例"></a>该例子的类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/23/67696b43d241d.png" alt="数据库抽象工厂.png"></p>
<h1 id="抽象工厂模式包含如下角色"><a href="#抽象工厂模式包含如下角色" class="headerlink" title="抽象工厂模式包含如下角色"></a>抽象工厂模式包含如下角色</h1><ol>
<li>AbstractFactory（抽象工厂）,抽象工厂用于声明生成抽象产品的方法，在一个抽象工厂中可以定义一组方法，每一个,方法对应一个产品等级结构。</li>
<li>ConcreteFactory（具体工厂）,具体工厂实现了抽象工厂声明的生成抽象产品的方法，生成一组具体产品，这些产品构,成了一个产品族，每一个产品都位于某个产品等级结构中。</li>
<li>AbstractProduct（抽象产品）,抽象产品为每种产品声明接口，在抽象产品中定义了产品的抽象业务方法。</li>
<li>ConcreteProduct（具体产品）,具体产品定义具体工厂生产的具体产品对象，实现抽象产品接口中定义的业务方法。</li>
</ol>
<h1 id="模式分析"><a href="#模式分析" class="headerlink" title="模式分析"></a>模式分析</h1><p>好处是易于交换产品，由于具体工厂类在一个应用中只需要在初始化的时候出现一次，这就使得<br>改变一个应用的具体工厂变得非常容易，它只需要改变具体工厂即可使用不同的产品配置。另外，他让<br>具体的创建实例过程与客户端分离，客户端是通过他们的抽象接口操作实例，产品的具体类名也被具体<br>工厂的实现分离，不会出现在客户代码中</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/" data-id="cm8sja984005h8ktbewol8brn" data-title="设计模式-抽象工厂模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式-工厂方法模式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-12-23T11:58:55.000Z" itemprop="datePublished">2024-12-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/">设计模式-工厂方法模式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="简单工厂模式的不足"><a href="#简单工厂模式的不足" class="headerlink" title="简单工厂模式的不足"></a>简单工厂模式的不足</h1><p>在<a target="_blank" rel="noopener" href="https://www.lzhiscoding.xyz/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/">简单工厂模式</a>中只提供了一个工厂类，该工厂类处于对产品类进行实例化的中心位置，它知道每一个产品对象的创建细节，并决定何时实例化哪一个产品类。但是最大的缺点就是每当有新产品要加入到系统中，必须修改工厂类。也就是违背了<a target="_blank" rel="noopener" href="https://www.lzhiscoding.xyz/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AE%80%E4%BB%8B/">开闭原则</a>，而工厂方法模式可以很好的解决这一问题</p>
<h1 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h1><p>在简单工厂模式基础上修改，不在设计一个工厂类来统一负责所有产品的创建。而是由具体的工厂来创建具体的产品，也就是说需要定义抽象产品类和抽象工厂类</p>
<h1 id="类图示例"><a href="#类图示例" class="headerlink" title="类图示例"></a>类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/23/676952496f3e3.png" alt="工厂方法模式.png"></p>
<h1 id="举个例子"><a href="#举个例子" class="headerlink" title="举个例子"></a>举个例子</h1><p>假设需要生产电视机，有不同的品牌的电视机</p>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象产品TV</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TV</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品HaierTV类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HaierTV</span> <span class="keyword">implements</span> <span class="title class_">TV</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Haier TV is displaying&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//具体产品HisenseTV类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HisenseTV</span> <span class="keyword">implements</span> <span class="title class_">TV</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hisense TV is displaying&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象工厂类TVFactory</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">TVFactory</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> TV <span class="title function_">getTV</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//HaierTV工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HaierTVFactory</span> <span class="keyword">implements</span> <span class="title class_">TVFactory</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> TV <span class="title function_">getTV</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HaierTV</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//HisenseTV工厂</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HisenseTVFactory</span> <span class="keyword">implements</span> <span class="title class_">TVFactory</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> TV <span class="title function_">getTV</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HisenseTV</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FactoryMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">TVFactory</span> <span class="variable">haierFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HaierTVFactory</span>();</span><br><span class="line">        TV tv1=haierFactory.getTV();</span><br><span class="line">        tv1.display();</span><br><span class="line">        <span class="type">TVFactory</span> <span class="variable">hisenseFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HisenseTVFactory</span>();</span><br><span class="line">        TV tv2=hisenseFactory.getTV();</span><br><span class="line">        tv2.display();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="该例子的类图示例"><a href="#该例子的类图示例" class="headerlink" title="该例子的类图示例"></a>该例子的类图示例</h1><p><img src="https://www.helloimg.com/i/2024/12/23/67695815030a8.png" alt="TV工厂.png"></p>
<h1 id="工厂方法模式包含如下角色"><a href="#工厂方法模式包含如下角色" class="headerlink" title="工厂方法模式包含如下角色"></a>工厂方法模式包含如下角色</h1><ol>
<li>Factory(抽象工厂)，声明了工厂方法，用于返回一个产品。与应用程序无关。任何在模式中创建对象的工厂类都必须实现此接口</li>
<li>ConcreteFactory(具体工厂)，实现了抽象工厂中定义的工厂方法，并可由客户调用，返回一个具体产品类的实例</li>
<li>Product(抽象产品)，抽象产品角色是工厂方法模式所创建的所有对象的父类，也就是产品对象的共同父类或接口</li>
<li>ConcreteProduct(具体产品角色)，具体产品实现了抽象产品接口，某种类型的具体产品由专门的具体工厂创建，它们之间一一对应</li>
</ol>
<h1 id="模式分析"><a href="#模式分析" class="headerlink" title="模式分析"></a>模式分析</h1><p>工厂方法模式保持了简单工厂模式的优点，而且克服了它的缺点。核心的工厂类不再负责所有产品的创建，而是将具体创建工作交给子类去做。这使得工厂方法模式可以允许系统在不修改工厂角色的情况下引进新产品</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/12/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/" data-id="cm8sja983005a8ktb7otiepzf" data-title="设计模式-工厂方法模式" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell%E8%84%9A%E6%9C%AC/">Shell脚本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity3D/">Unity3D</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unreal-Engine/">Unreal Engine</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Springboot/" rel="tag">Springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unity3D/" rel="tag">Unity3D</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unreal-Engine/" rel="tag">Unreal Engine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/" rel="tag">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Docker/" style="font-size: 16px;">Docker</a> <a href="/tags/JavaScript/" style="font-size: 18px;">JavaScript</a> <a href="/tags/Linux/" style="font-size: 16px;">Linux</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/Springboot/" style="font-size: 18px;">Springboot</a> <a href="/tags/Unity3D/" style="font-size: 14px;">Unity3D</a> <a href="/tags/Unreal-Engine/" style="font-size: 12px;">Unreal Engine</a> <a href="/tags/Vue/" style="font-size: 12px;">Vue</a> <a href="/tags/Web/" style="font-size: 14px;">Web</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18px;">算法</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 20px;">设计模式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">十二月 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/03/28/WebSocket/">WebSocket</a>
          </li>
        
          <li>
            <a href="/2025/03/15/Docker%E5%AE%89%E8%A3%85/">Docker安装</a>
          </li>
        
          <li>
            <a href="/2025/03/15/Docker%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/">Docker项目部署</a>
          </li>
        
          <li>
            <a href="/2025/03/15/Docker%E5%9F%BA%E7%A1%80/">Docker基础</a>
          </li>
        
          <li>
            <a href="/2025/03/15/Docker%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/">Docker快速入门</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Lzh<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>