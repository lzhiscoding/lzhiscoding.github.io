<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Redis数据库 | Lzh正在写代码</title><meta name="keywords" content="Web"><meta name="author" content="Lzh"><meta name="copyright" content="Lzh"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Redis数据库"><meta name="application-name" content="Redis数据库"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Redis数据库"><meta property="og:url" content="http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/index.html"><meta property="og:site_name" content="Lzh正在写代码"><meta property="og:description" content="1.缓存的需求 前端页面广告位数据无需每次查询后台系统的接口，可以在前台系统添加缓存，提高访问首页的速度。 电商网站首页左侧商品类目一栏的数据也可以缓存起来,不用每次打开首页都去数据库读取数据，读取数据库IO开销大。 解决方案：使用缓存。 1.1目前缓存的主流技术1、Redis2、Memcached"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.helloimg.com/i/2025/03/28/67e66568e6b21.png"><meta property="article:author" content="Lzh"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.helloimg.com/i/2025/03/28/67e66568e6b21.png"><meta name="description" content="1.缓存的需求 前端页面广告位数据无需每次查询后台系统的接口，可以在前台系统添加缓存，提高访问首页的速度。 电商网站首页左侧商品类目一栏的数据也可以缓存起来,不用每次打开首页都去数据库读取数据，读取数据库IO开销大。 解决方案：使用缓存。 1.1目前缓存的主流技术1、Redis2、Memcached"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Lzh","link":"链接: ","source":"来源: Lzh正在写代码","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Lzh正在写代码',
  title: 'Redis数据库',
  postAI: '',
  pageFillDescription: '1.1目前缓存的主流技术, 1.2什么是缓存？, 2.Redis, 2.1.NoSQL, 2.2.主流的NoSQL产品, 2.3.Redis简介, 2.4.历史与发展, 2.5.Redis的特性, 2.6.Redis版本说明, 2.7.下载Redis, 2.8.Redis的安装, 2.8.1.安装文件, 2.8.2.安装方式一, 2.8.3.安装方式二（安装到系统服务）, 2.8.4.32位操作系统安装, 2.8.5.注意事项, 2.9.Redis-cli使用, 2.9.1.redis-cli的使用之发送命令, 2.9.2.redis-cli的使用之命令返回值, 2.10.Redis的多数据库, 2.10.1.配置数据库数量, 2.11.Redis的基本命令, 2.11.1.KEYS, 2.11.2.EXISTS, 2.11.3.DEL, 2.11.4.TYPE, 2.11.5.HELP, 3.Redis的字符串数据类型(String), 3.1.字符串类型, 3.2.GET、SET, 3.3.INCR, 3.4.INCRBY, 3.5.DECR、DECRBY, 3.6.APPEND, 3.7.STRLEN, 3.8.MSET、MGET, 4. 列表类型(List), 5.Redis 集合(Set), 5.1.set, 5.2.有序集合(sorted set), 6.Redis的Hash数据结构, 6.1.数据结构, 6.2.基本操作, 6.3.判断是否存在和选择性插入, 6.4.Hash的自增长, 6.5.只获取字段名或字段值, 6.6.获取字段数量, 7.Redis之生存时间, 7.1.设置生存时间, 7.2.清除生存时间, 8.Redis事务, 8.1.11.1、Redis事务, 8.2.11.2、实例, 8.3.11.3、Redis 事务命令, 9.客户端, 9.1.支持的语言, 9.2.Jedis, 9.3.Jedis的使用, 9.3.1.导入依赖, 9.3.2.简单示例, 9.3.3.连接池使用, 9.3.4.分片式集群, 9.3.5.分片式集群的使用, 10.Spring项目集成Redis, 10.1.1.Spring和Jedis的整合, 10.1.2.封装RedisService, 10.1.3.优化RedisService, 10.1.4.测试RedisService, 11.SpringBoot集成Redis, 11.1.引入maven依赖, 11.2.新增配置文件信息, 11.3.Java代码, 11.4.单元测试, 缓存的需求前端页面广告位数据无需每次查询后台系统的接口可以在前台系统添加缓存提高访问首页的速度电商网站首页左侧商品类目一栏的数据也可以缓存起来不用每次打开首页都去数据库读取数据读取数据库开销大解决方案使用缓存目前缓存的主流技术二者谁的性能更高单纯从缓存命中的角度来说是要高和的差距不大但是提供的功能更加的强大二者的区别是什么是多线程是单线程什么是缓存主流的产品简介官网是数据库中使用较为广泛的非关系型内存数据库内部是一个存储系统它支持存储的类型相对更多包括字符串链表集合有序集合和哈希类型类似于中的基于内存运行并支持持久化的数据库是当前最热门的数据库之一也被人们称为数据结构存储服务务器历史与发展的特性与其他数据库相比有着更为复杂的数据结构并且提供对他们的原子性操作这是一个不同于其他数据库的进化路径的数据类型都是基于基本数据结构的同时对程序员透明无需进行额外的抽象运行在内存中但是可以持久化到磁盘所以在对不同数据集进行高速读写时需要权衡内存因为数据量不能大于硬件内存内存数据库的另一个优点是相比在磁盘上相同的复杂的数据结构在内存中操作起来非常简单这样可以做很多内部复杂性很强的事情同时在磁盘格式方面他们是紧凑的以追加的方式产生的因为他们并不需要进行随机访问特性性能极高能读的速度是次写的速度是次丰富的数据类型支持二进制案例的及数据类型操作原子的所有操作都是原子性的同时还支持对几个操作全并后的原子性执行其它特性还支持通知过期等等特性版本说明下载版本所有版本位版本位版本所有版本的安装安装文件安装方式一双击打开即可测试双击打开安装方式二安装到系统服务先删除原有的系统服务进到目录执行如下命令安装服务位操作系统安装只能通过双击打开启动不能安装到系统服务注意事项由于文件系统非导致启动失败限制的最大内存使用的使用之发送命令从命令行进入到安装目录执行如下命令的使用之命令返回值的多数据库清空所有数据库的所有数据清空当前所在数据库的数据配置数据库数量的基本命令空格键的字符串数据类型字符串类型下表列出了一些用于在中管理字符串的基本命令编号命令描述说明此命令设置指定键的值获取指定键的值获取存储在键上的字符串的子字符串设置键的字符串值并返回其旧值返回在键处存储的字符串值中偏移处的位值获取所有给定键的值存储在键上的字符串值中设置或清除偏移处的位使用键和到期时间来设置值设置键的值仅当键不存在时在指定偏移处开始的键处覆盖字符串的一部分获取存储在键中的值的长度为多个键分别设置它们的值为多个键分别设置它们的值仅当键不存在时设置键的值和到期时间以毫秒为单位将键的整数值增加将键的整数值按给定的数值增加将键的浮点值按给定的数值增加将键的整数值减按给定数值减少键的整数值将指定值附加到键列表类型列表是简单的字符串列表按照插入顺序排序你可以添加一个元素到列表的头部左边或者尾部右边一个列表最多可以包含个元素每个列表超过亿个元素列表命令下表列出了列表相关的基本命令序号命令及描述移出并获取列表的第一个元素如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止移出并获取列表的最后一个元素如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止从列表中弹出一个值将弹出的元素插入到另外一个列表中并返回它如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止通过索引获取列表中的元素在列表的元素前或者后插入元素获取列表长度移出并获取列表的第一个元素将一个或多个值插入到列表头部将一个值插入到已存在的列表头部获取列表指定范围内的元素移除列表元素通过索引设置列表元素的值对一个列表进行修剪就是说让列表只保留指定区间内的元素不在指定区间之内的元素都将被删除移除并获取列表最后一个元素移除列表的最后一个元素并将该元素添加到另一个列表并返回在列表中添加一个或多个值为已存在的列表添加值集合的是类型的无序集合集合成员是唯一的这就意味着集合中不能出现重复的数据中集合是通过哈希表实现的所以添加删除查找的复杂度都是集合中最大的成员数为每个集合可存储多亿个成员实例在以上实例中我们通过命令向名为的集合插入的三个元素集合命令下表列出了集合基本命令序号命令及描述向集合添加一个或多个成员获取集合的成员数返回给定所有集合的差集返回给定所有集合的差集并存储在中返回给定所有集合的交集返回给定所有集合的交集并存储在中判断元素是否是集合的成员返回集合中的所有成员将元素从集合移动到集合移除并返回集合中的一个随机元素返回集合中一个或多个随机数移除集合中一个或多个成员返回所有给定集合的并集所有给定集合的并集存储在集合中迭代集合中的元素有序集合有序集合和集合一样也是类型元素的集合且不允许重复的成员不同的是每个元素都会关联一个类型的分数正是通过分数来为集合中的成员进行从小到大的排序有序集合的成员是唯一的但分数却可以重复集合是通过哈希表实现的所以添加删除查找的复杂度都是集合中最大的成员数为每个集合可存储多亿个成员实例在以上实例中我们通过命令向的有序集合中添加了三个值并关联上分数有序集合命令下表列出了有序集合的基本命令序号命令及描述向有序集合添加一个或多个成员或者更新已存在成员的分数获取有序集合的成员数计算在有序集合中指定区间分数的成员数有序集合中对指定成员的分数加上增量计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合中在有序集合中计算指定字典区间内成员数量通过索引区间返回有序集合成指定区间内的成员通过字典区间返回有序集合的成员通过分数返回有序集合指定区间内的成员返回有序集合中指定成员的索引移除有序集合中的一个或多个成员移除有序集合中给定的字典区间的所有成员移除有序集合中给定的排名区间的所有成员移除有序集合中给定的分数区间的所有成员返回有序集中指定区间内的成员通过索引分数从高到底返回有序集中指定分数区间内的成员分数从高到低排序返回有序集合中指定成员的排名有序集成员按分数值递减从大到小排序返回有序集中成员的分数值计算给定的一个或多个有序集的并集并存储在新的中迭代有序集合中的元素包括元素成员和元素分值的数据结构数据结构是一个类型的和的映射表特别适合用于存储对象中每个可以存储键值对多亿基本操作判断是否存在和选择性插入的自增长只获取字段名或字段值获取字段数量下表列出了基本的相关命令序号命令及描述删除一个或多个哈希表字段查看哈希表中指定的字段是否存在获取存储在哈希表中指定字段的值获取在哈希表中指定的所有字段和值为哈希表中的指定字段的整数值加上增量为哈希表中的指定字段的浮点数值加上增量获取所有哈希表中的字段获取哈希表中字段的数量获取所有给定字段的值同时将多个域值对设置到哈希表中将哈希表中的字段的值设为只有在字段不存在时设置哈希表字段的值获取哈希表中所有值迭代哈希表中的键值对之生存时间设置生存时间返回值大于的数字剩余生存时间单位为秒没有生存时间永久存储数据已经被删除清除生存时间事务事务事务可以一次执行多个命令并且带有以下两个重要的保证事务是一个单独的隔离操作事务中的所有命令都会序列化按顺序地执行事务在执行的过程中不会被其他客户端发送来的命令请求所打断事务是一个原子操作事务中的命令要么全部被执行要么全部都不执行一个事务从开始到执行会经历以下三个阶段开始事务命令入队执行事务实例以下是一个事务的例子它先以开始一个事务然后将多个命令入队到事务中最后由命令触发事务一并执行事务中的所有命令事务命令下表列出了事务的相关命令序号命令及描述取消事务放弃执行事务块内的所有命令执行所有事务块内的命令标记一个事务块的开始取消命令对所有的监视监视一个或多个如果在事务执行之前这个或这些被其他命令所改动那么事务将被打断客户端支持的语言的使用项目下载地址导入依赖简单示例在运行程序之前确保服务器已经启动构造对象向中添加数据鸟鹏从中读取数据关闭连接运行之后查看中的值连接池使用构建连接池配置信息设置最大连接数构建连接池从连接池中获取连接读取数据将连接还回到连接池中释放连接池分片式集群存在的问题无法动态增加减少服务节点分片式集群的使用集群式的连接池构建连接池配置信息设置最大连接数定义集群信息定义集群连接池从连接池中获取到分片对象从中获取数据关闭检测连接是否有效有效则放回到连接池中无效则重置状态关闭连接池项目集成和的整合开启注解连接池的配置分片式连接池的配置封装执行操作从连接池中获取到分片对象关闭检测连接是否有效有效则放回到连接池中无效则重置状态执行操作从连接池中获取到分片对象关闭检测连接是否有效有效则放回到连接池中无效则重置状态优化定义接口的实现从连接池中获取到分片对象关闭检测连接是否有效有效则放回到连接池中无效则重置状态执行操作执行操作执行删除操作设置生存时间单位为秒执行操作并且设置生存时间单位为秒测试集成引入依赖新增配置文件信息代码单元测试鹏程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-03-28 17:06:05',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Lzh正在写代码</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Docker/" style="font-size: 1.05rem;">Docker<sup>4</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>7</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>4</sup></a><a href="/tags/Shell/" style="font-size: 1.05rem;">Shell<sup>1</sup></a><a href="/tags/Springboot/" style="font-size: 1.05rem;">Springboot<sup>8</sup></a><a href="/tags/Unity3D/" style="font-size: 1.05rem;">Unity3D<sup>3</sup></a><a href="/tags/Unreal-Engine/" style="font-size: 1.05rem;">Unreal Engine<sup>2</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>2</sup></a><a href="/tags/Web/" style="font-size: 1.05rem;">Web<sup>4</sup></a><a href="/tags/git/" style="font-size: 1.05rem;">git<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>7</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.05rem;">设计模式<sup>15</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">22</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">29</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Web/" itemprop="url">Web</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Web/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Web</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Redis数据库</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-03-28T08:54:18.000Z" title="发表于 2025-03-28 16:54:18">2025-03-28</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-03-28T09:06:05.914Z" title="更新于 2025-03-28 17:06:05">2025-03-28</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://www.helloimg.com/i/2025/03/28/67e66568e6b21.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/"><header><a class="post-meta-categories" href="/categories/Web/" itemprop="url">Web</a><a href="/tags/Web/" tabindex="-1" itemprop="url">Web</a><h1 id="CrawlerTitle" itemprop="name headline">Redis数据库</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Lzh</span><time itemprop="dateCreated datePublished" datetime="2025-03-28T08:54:18.000Z" title="发表于 2025-03-28 16:54:18">2025-03-28</time><time itemprop="dateCreated datePublished" datetime="2025-03-28T09:06:05.914Z" title="更新于 2025-03-28 17:06:05">2025-03-28</time></header><p>1.缓存的需求</p>
<p>前端页面广告位数据无需每次查询后台系统的接口，可以在前台系统添加缓存，提高访问首页的速度。</p>
<p>电商网站首页左侧商品类目一栏的数据也可以缓存起来,不用每次打开首页都去数据库读取数据，读取数据库IO开销大。</p>
<p>解决方案：使用缓存。</p>
<h4 id="1-1目前缓存的主流技术"><a href="#1-1目前缓存的主流技术" class="headerlink" title="1.1目前缓存的主流技术"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>1.1目前缓存的主流技术</h4><p>1、Redis<br>2、Memcached</p>
<p>二者谁的性能更高？<br>1、单纯从缓存命中的角度来说，是Memcached要高，Redis和Memcache的差距不大<br>2、但是，Redis提供的功能更加的强大</p>
<p>二者的区别是什么？<br>1、Memcache是多线程<br>2、Redis是单线程</p>
<h4 id="1-2什么是缓存？"><a href="#1-2什么是缓存？" class="headerlink" title="1.2什么是缓存？"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>1.2什么是缓存？</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/5ec3c51c8fd869e17de36cddf440df1f.png" alt="这里写图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/56d8de7291cdfbb028a9d0bd3d3089a9.png" alt="这里写图片描述"></p>
<h3 id="2-Redis"><a href="#2-Redis" class="headerlink" title="2.Redis"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.Redis</h3><h4 id="2-1-NoSQL"><a href="#2-1-NoSQL" class="headerlink" title="2.1.NoSQL"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.1.NoSQL</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/a257ac6b69fca19547fd0c3029c28540.png" alt="这里写图片描述"></p>
<h4 id="2-2-主流的NoSQL产品"><a href="#2-2-主流的NoSQL产品" class="headerlink" title="2.2.主流的NoSQL产品"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.2.主流的NoSQL产品</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/d477fab5794cfa5e925671537373b5f3.png" alt="这里写图片描述"></p>
<h4 id="2-3-Redis简介"><a href="#2-3-Redis简介" class="headerlink" title="2.3.Redis简介"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.3.Redis简介</h4><p>Redis官网: <a target="_blank" rel="noopener" href="http://redis.io/">http://redis.io/</a><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/2359744eee8ce188e7fad23e950a4d88.png" alt="这里写图片描述"></p>
<p>redis是Nosql数据库中使用较为广泛的非关系型内存数据库，redis内部是一个key-value存储系统。它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set –有序集合)和hash（哈希类型，类似于Java中的map）。Redis基于内存运行并支持持久化的NoSQL数据库，是当前最热门的NoSql数据库之一，也被人们称为数据结构存储服务务器。</p>
<h4 id="2-4-历史与发展"><a href="#2-4-历史与发展" class="headerlink" title="2.4.历史与发展"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.4.历史与发展</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/67db104b78657eb90b519d6bd8e54004.png" alt="这里写图片描述"></p>
<h4 id="2-5-Redis的特性"><a href="#2-5-Redis的特性" class="headerlink" title="2.5.Redis的特性"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.5.Redis的特性</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/836a59d234e95a1d60b10c1981eabf46.png" alt="这里写图片描述"><br>与其他NoSQL数据库相比，Redis有着更为复杂的数据结构并且提供对他们的原子性操作，这是一个不同于其他数据库的进化路径。Redis的数据类型都是基于基本数据结构的，同时对程序员透明，无需进行额外的抽象。<br>Redis运行在内存中但是可以持久化到磁盘，所以在对不同数据集进行高速读写时需要权衡内存，因为数据量不能大于硬件内存。内存数据库的另一个优点是，相比在磁盘上相同的复杂的数据结构，在内存中操作起来非常简单，这样Redis可以做很多内部复杂性很强的事情。同时，在磁盘格式方面他们是紧凑的以追加的方式产生的，因为他们并不需要进行随机访问。<br>Redis特性：<br>性能极高 – Redis能读的速度是110000次&#x2F;s,写的速度是81000次&#x2F;s 。<br>丰富的数据类型 – Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。<br>原子 – Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行。<br>其它特性 – Redis还支持 publish&#x2F;subscribe, 通知, key 过期等等特性。</p>
<h4 id="2-6-Redis版本说明"><a href="#2-6-Redis版本说明" class="headerlink" title="2.6.Redis版本说明"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.6.Redis版本说明</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/a096d1633893bb66cdaff5b0e4e5609e.png" alt="这里写图片描述"></p>
<h4 id="2-7-下载Redis"><a href="#2-7-下载Redis" class="headerlink" title="2.7.下载Redis"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.7.下载Redis</h4><p>Linux版本 2.8.11 ：<br><a target="_blank" rel="noopener" href="http://download.redis.io/releases/redis-2.8.11.tar.gz">http://download.redis.io/releases/redis-2.8.11.tar.gz</a><br>Linux所有版本<br><a target="_blank" rel="noopener" href="http://download.redis.io/releases/">http://download.redis.io/releases/</a></p>
<p>Windows(64位)版本 2.8.9 ：<br><a target="_blank" rel="noopener" href="https://github.com/MSOpenTech/redis/blob/2.8/bin/release/redis-2.8.9.zip?raw=true">https://github.com/MSOpenTech/redis/blob/2.8/bin/release/redis-2.8.9.zip?raw=true</a><br>Windows(32位)版本 2.6 ：<br><a target="_blank" rel="noopener" href="https://github.com/MSOpenTech/redis/blob/2.6/bin/release/redisbin.zip?raw=true">https://github.com/MSOpenTech/redis/blob/2.6/bin/release/redisbin.zip?raw=true</a><br>Windows所有版本：<br><a target="_blank" rel="noopener" href="https://github.com/MicrosoftArchive/redis/releases">https://github.com/MicrosoftArchive/redis/releases</a></p>
<h4 id="2-8-Redis的安装"><a href="#2-8-Redis的安装" class="headerlink" title="2.8.Redis的安装"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.8.Redis的安装</h4><h5 id="2-8-1-安装文件"><a href="#2-8-1-安装文件" class="headerlink" title="2.8.1.安装文件"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.8.1.安装文件</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/40cef4c089abcb9ba2937d1335d575c9.png" alt="这里写图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/9fc29f81dfc4c1f905edcacac98766c8.png" alt="这里写图片描述"></p>
<h5 id="2-8-2-安装方式一"><a href="#2-8-2-安装方式一" class="headerlink" title="2.8.2.安装方式一"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.8.2.安装方式一</h5><p>双击打开redis-server.exe即可：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/610b80a96b79f29388e1fc3c7f690497.png" alt="这里写代码片"></p>
<p>测试：<br>双击打开redis-cli.exe<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/0779a54fae03ebd760ebec1ae9f1c653.png" alt="这里写图片描述"></p>
<h5 id="2-8-3-安装方式二（安装到系统服务）"><a href="#2-8-3-安装方式二（安装到系统服务）" class="headerlink" title="2.8.3.安装方式二（安装到系统服务）"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.8.3.安装方式二（安装到系统服务）</h5><p>先删除原有的系统服务：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/28e0dbd03512ec7e03f9a6d81bb2d9f9.png" alt="这里写图片描述"><br>进到redis目录执行如下命令安装服务：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/927f30949bbb7da8349dc2e0ce7659b9.png" alt="这里写图片描述"></p>
<h5 id="2-8-4-32位操作系统安装"><a href="#2-8-4-32位操作系统安装" class="headerlink" title="2.8.4.32位操作系统安装"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.8.4.32位操作系统安装</h5><p>只能通过双击打开redis-server.exe启动，不能安装到系统服务。</p>
<h5 id="2-8-5-注意事项"><a href="#2-8-5-注意事项" class="headerlink" title="2.8.5.注意事项"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.8.5.注意事项</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/9997130aa949c439d66b1ecbc8f1a1dc.png" alt="这里写图片描述"></p>
<p>由于文件系统非NTFS，导致Redis启动失败：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/3814c7b55ad7c89cec2e4b25cc851df8.png" alt="这里写图片描述"></p>
<p>限制Redis的最大内存（redis.windows-service.conf）：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/4ada7543b4613ab87271ab0ad80bd075.png" alt="这里写图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/054623a22308d0aecd32c4619b5c918c.png" alt="这里写图片描述"></p>
<h4 id="2-9-Redis-cli使用"><a href="#2-9-Redis-cli使用" class="headerlink" title="2.9.Redis-cli使用"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.9.Redis-cli使用</h4><h5 id="2-9-1-redis-cli的使用之发送命令"><a href="#2-9-1-redis-cli的使用之发送命令" class="headerlink" title="2.9.1.redis-cli的使用之发送命令"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.9.1.redis-cli的使用之发送命令</h5><p>从windows命令行进入到redis安装目录执行如下命令：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/ef398b61d8b22833e42cd16f7889a088.png" alt="这里写图片描述"></p>
<h5 id="2-9-2-redis-cli的使用之命令返回值"><a href="#2-9-2-redis-cli的使用之命令返回值" class="headerlink" title="2.9.2.redis-cli的使用之命令返回值"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.9.2.redis-cli的使用之命令返回值</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/d789c79d4a731594beb75029ad9fd222.png" alt="这里写图片描述"></p>
<h4 id="2-10-Redis的多数据库"><a href="#2-10-Redis的多数据库" class="headerlink" title="2.10.Redis的多数据库"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.10.Redis的多数据库</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/e4b9dca931d75e18e3397f2de0f98ff9.png" alt="这里写图片描述"></p>
<p>FLUSHALL – 清空所有数据库的所有数据<br>FLUSHDB – 清空当前所在数据库的数据</p>
<h5 id="2-10-1-配置数据库数量"><a href="#2-10-1-配置数据库数量" class="headerlink" title="2.10.1.配置数据库数量"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.10.1.配置数据库数量</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/29ce8a441d7345f033fab5bd48c39f3f.png" alt="这里写图片描述"></p>
<h4 id="2-11-Redis的基本命令"><a href="#2-11-Redis的基本命令" class="headerlink" title="2.11.Redis的基本命令"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.11.Redis的基本命令</h4><h5 id="2-11-1-KEYS"><a href="#2-11-1-KEYS" class="headerlink" title="2.11.1.KEYS"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.11.1.KEYS</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/3fa15a4da0a218c7a31752b8eead9876.png" alt="这里写图片描述"></p>
<h5 id="2-11-2-EXISTS"><a href="#2-11-2-EXISTS" class="headerlink" title="2.11.2.EXISTS"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.11.2.EXISTS</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/56b44d2fcae82bba8d73b103389e537d.png" alt="这里写图片描述"></p>
<h5 id="2-11-3-DEL"><a href="#2-11-3-DEL" class="headerlink" title="2.11.3.DEL"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.11.3.DEL</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/992629ba889ebc81e59e14c5b1d73263.png" alt="这里写图片描述"></p>
<h5 id="2-11-4-TYPE"><a href="#2-11-4-TYPE" class="headerlink" title="2.11.4.TYPE"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.11.4.TYPE</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/72b4ba47dbcd374f6c3268b197590143.png" alt="这里写图片描述"></p>
<h5 id="2-11-5-HELP"><a href="#2-11-5-HELP" class="headerlink" title="2.11.5.HELP"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>2.11.5.HELP</h5><p>HELP 空格 tab键<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/139615eacbdc08cdf84bbe42d52f6cf5.png" alt="这里写图片描述"></p>
<h3 id="3-Redis的字符串数据类型-String"><a href="#3-Redis的字符串数据类型-String" class="headerlink" title="3.Redis的字符串数据类型(String)"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.Redis的字符串数据类型(String)</h3><h4 id="3-1-字符串类型"><a href="#3-1-字符串类型" class="headerlink" title="3.1.字符串类型"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.1.字符串类型</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/013970779acb8cd913c63e48cd529530.png" alt="这里写图片描述"></p>
<h4 id="3-2-GET、SET"><a href="#3-2-GET、SET" class="headerlink" title="3.2.GET、SET"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.2.GET、SET</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/ed9ab426cd0b2a0c93790c4dd9162fb3.png" alt="这里写图片描述"></p>
<h4 id="3-3-INCR"><a href="#3-3-INCR" class="headerlink" title="3.3.INCR"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.3.INCR</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/c98e49f1e52b5a0a0d65e71a1bb786f2.png" alt="这里写图片描述"></p>
<h4 id="3-4-INCRBY"><a href="#3-4-INCRBY" class="headerlink" title="3.4.INCRBY"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.4.INCRBY</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/9415486927dec36671746b3dab699aa0.png" alt="这里写图片描述"></p>
<h4 id="3-5-DECR、DECRBY"><a href="#3-5-DECR、DECRBY" class="headerlink" title="3.5.DECR、DECRBY"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.5.DECR、DECRBY</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/7933395bfc5895698a760504d8352a13.png" alt="这里写图片描述"></p>
<h4 id="3-6-APPEND"><a href="#3-6-APPEND" class="headerlink" title="3.6.APPEND"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.6.APPEND</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/f14cf3e366e2f3d7c4c6d2b7580a847e.png" alt="这里写图片描述"></p>
<h4 id="3-7-STRLEN"><a href="#3-7-STRLEN" class="headerlink" title="3.7.STRLEN"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.7.STRLEN</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/6f7e609e5996b408e479cfe913825b08.png" alt="这里写图片描述"></p>
<h4 id="3-8-MSET、MGET"><a href="#3-8-MSET、MGET" class="headerlink" title="3.8.MSET、MGET"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>3.8.MSET、MGET</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/81253e79f61451dfc3d35d2413d7fded.png" alt="这里写图片描述"><br>下表列出了一些用于在Redis中管理字符串的基本命令。<br>编号 命令 描述说明<br>1 SET key value 此命令设置指定键的值。<br>2 GET key 获取指定键的值。<br>3 GETRANGE key start end 获取存储在键上的字符串的子字符串。<br>4 GETSET key value 设置键的字符串值并返回其旧值。<br>5 GETBIT key offset 返回在键处存储的字符串值中偏移处的位值。<br>6 MGET key1 [key2…] 获取所有给定键的值<br>7 SETBIT key offset value 存储在键上的字符串值中设置或清除偏移处的位<br>8 SETEX key seconds value 使用键和到期时间来设置值<br>9 SETNX key value 设置键的值，仅当键不存在时<br>10 SETRANGE key offset value 在指定偏移处开始的键处覆盖字符串的一部分<br>11 STRLEN key 获取存储在键中的值的长度<br>12 MSET key value [key value …] 为多个键分别设置它们的值<br>13 MSETNX key value [key value …] 为多个键分别设置它们的值，仅当键不存在时<br>14 PSETEX key milliseconds value 设置键的值和到期时间(以毫秒为单位)<br>15 INCR key 将键的整数值增加1<br>16 INCRBY key increment 将键的整数值按给定的数值增加<br>17 INCRBYFLOAT key increment 将键的浮点值按给定的数值增加<br>18 DECR key 将键的整数值减1<br>19 DECRBY key decrement 按给定数值减少键的整数值<br>20 APPEND key value 将指定值附加到键</p>
<h3 id="4-列表类型-List"><a href="#4-列表类型-List" class="headerlink" title="4. 列表类型(List)"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>4. 列表类型(List)</h3><p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）<br>一个列表最多可以包含 232 - 1 个元素 (4294967295, 每个列表超过40亿个元素)。</p>
<p>redis 127.0.0.1:6379&gt; LPUSH runoobkey redis<br>(integer) 1<br>redis 127.0.0.1:6379&gt; LPUSH runoobkey mongodb<br>(integer) 2<br>redis 127.0.0.1:6379&gt; LPUSH runoobkey mysql<br>(integer) 3<br>redis 127.0.0.1:6379&gt; LRANGE runoobkey 0 10</p>
<ol>
<li>“mysql”</li>
<li>“mongodb”</li>
<li>“redis”</li>
</ol>
<p>Redis 列表命令<br>下表列出了列表相关的基本命令：<br>序号 命令及描述<br>1 BLPOP key1 [key2 ] timeout<br>移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。<br>2 BRPOP key1 [key2 ] timeout<br>移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。<br>3 BRPOPLPUSH source destination timeout<br>从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它； 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。<br>4 LINDEX key index<br>通过索引获取列表中的元素<br>5 LINSERT key BEFORE|AFTER pivot value<br>在列表的元素前或者后插入元素<br>6 LLEN key<br>获取列表长度<br>7 LPOP key<br>移出并获取列表的第一个元素<br>8 LPUSH key value1 [value2]<br>将一个或多个值插入到列表头部<br>9 LPUSHX key value<br>将一个值插入到已存在的列表头部<br>10 LRANGE key start stop<br>获取列表指定范围内的元素<br>11 LREM key count value<br>移除列表元素<br>12 LSET key index value<br>通过索引设置列表元素的值<br>13 LTRIM key start stop<br>对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。<br>14 RPOP key<br>移除并获取列表最后一个元素<br>15 RPOPLPUSH source destination<br>移除列表的最后一个元素，并将该元素添加到另一个列表并返回<br>16 RPUSH key value1 [value2]<br>在列表中添加一个或多个值<br>17 RPUSHX key value<br>为已存在的列表添加值</p>
<h3 id="5-Redis-集合-Set"><a href="#5-Redis-集合-Set" class="headerlink" title="5.Redis 集合(Set)"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>5.Redis 集合(Set)</h3><h4 id="5-1-set"><a href="#5-1-set" class="headerlink" title="5.1.set"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>5.1.set</h4><p>Redis的Set是string类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。<br>Redis 中 集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。<br>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p>
<p>实例<br>redis 127.0.0.1:6379&gt; SADD runoobkey2 redis<br>(integer) 1<br>redis 127.0.0.1:6379&gt; SADD runoobkey2 mongodb<br>(integer) 1<br>redis 127.0.0.1:6379&gt; SADD runoobkey2 mysql<br>(integer) 1<br>redis 127.0.0.1:6379&gt; SADD runoobkey mysql<br>(integer) 0<br>redis 127.0.0.1:6379&gt; SMEMBERS runoobkey</p>
<ol>
<li>“mysql”</li>
<li>“mongodb”</li>
<li>“redis”<br>在以上实例中我们通过 SADD 命令向名为 runoobkey 的集合插入的三个元素。</li>
</ol>
<p>Redis 集合命令<br>下表列出了 Redis 集合基本命令：<br>序号 命令及描述<br>1 SADD key member1 [member2]<br>向集合添加一个或多个成员<br>2 SCARD key<br>获取集合的成员数<br>3 SDIFF key1 [key2]<br>返回给定所有集合的差集<br>4 SDIFFSTORE destination key1 [key2]<br>返回给定所有集合的差集并存储在 destination 中<br>5 SINTER key1 [key2]<br>返回给定所有集合的交集<br>6 SINTERSTORE destination key1 [key2]<br>返回给定所有集合的交集并存储在 destination 中<br>7 SISMEMBER key member<br>判断 member 元素是否是集合 key 的成员<br>8 SMEMBERS key<br>返回集合中的所有成员<br>9 SMOVE source destination member<br>将 member 元素从 source 集合移动到 destination 集合<br>10 SPOP key<br>移除并返回集合中的一个随机元素<br>11 SRANDMEMBER key [count]<br>返回集合中一个或多个随机数<br>12 SREM key member1 [member2]<br>移除集合中一个或多个成员<br>13 SUNION key1 [key2]<br>返回所有给定集合的并集<br>14 SUNIONSTORE destination key1 [key2]<br>所有给定集合的并集存储在 destination 集合中<br>15 SSCAN key cursor [MATCH pattern] [COUNT count]<br>迭代集合中的元素</p>
<h4 id="5-2-有序集合-sorted-set"><a href="#5-2-有序集合-sorted-set" class="headerlink" title="5.2.有序集合(sorted set)"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>5.2.有序集合(sorted set)</h4><p>Redis 有序集合和集合一样也是string类型元素的集合,且不允许重复的成员。<br>不同的是每个元素都会关联一个double类型的分数。redis正是通过分数来为集合中的成员进行从小到大的排序。<br>有序集合的成员是唯一的,但分数(score)却可以重复。<br>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。 集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。<br>实例<br>redis 127.0.0.1:6379&gt; ZADD runoobkey 1 redis<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD runoobkey 2 mongodb<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql<br>(integer) 1<br>redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql<br>(integer) 0<br>redis 127.0.0.1:6379&gt; ZADD runoobkey 4 mysql<br>(integer) 0<br>redis 127.0.0.1:6379&gt; ZRANGE runoobkey 0 10 WITHSCORES</p>
<ol>
<li>“redis”</li>
<li>“1”</li>
<li>“mongodb”</li>
<li>“2”</li>
<li>“mysql”</li>
<li>“4”<br>在以上实例中我们通过命令 ZADD 向 redis 的有序集合中添加了三个值并关联上分数。</li>
</ol>
<p>Redis 有序集合命令<br>下表列出了 redis 有序集合的基本命令:<br>序号 命令及描述<br>1 ZADD key score1 member1 [score2 member2]<br>向有序集合添加一个或多个成员，或者更新已存在成员的分数<br>2 ZCARD key<br>获取有序集合的成员数<br>3 ZCOUNT key min max<br>计算在有序集合中指定区间分数的成员数<br>4 ZINCRBY key increment member<br>有序集合中对指定成员的分数加上增量 increment<br>5 ZINTERSTORE destination numkeys key [key …]<br>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中<br>6 ZLEXCOUNT key min max<br>在有序集合中计算指定字典区间内成员数量<br>7 ZRANGE key start stop [WITHSCORES]<br>通过索引区间返回有序集合成指定区间内的成员<br>8 ZRANGEBYLEX key min max [LIMIT offset count]<br>通过字典区间返回有序集合的成员<br>9 ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT]<br>通过分数返回有序集合指定区间内的成员<br>10 ZRANK key member<br>返回有序集合中指定成员的索引<br>11 ZREM key member [member …]<br>移除有序集合中的一个或多个成员<br>12 ZREMRANGEBYLEX key min max<br>移除有序集合中给定的字典区间的所有成员<br>13 ZREMRANGEBYRANK key start stop<br>移除有序集合中给定的排名区间的所有成员<br>14 ZREMRANGEBYSCORE key min max<br>移除有序集合中给定的分数区间的所有成员<br>15 ZREVRANGE key start stop [WITHSCORES]<br>返回有序集中指定区间内的成员，通过索引，分数从高到底<br>16 ZREVRANGEBYSCORE key max min [WITHSCORES]<br>返回有序集中指定分数区间内的成员，分数从高到低排序<br>17 ZREVRANK key member<br>返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序<br>18 ZSCORE key member<br>返回有序集中，成员的分数值<br>19 ZUNIONSTORE destination numkeys key [key …]<br>计算给定的一个或多个有序集的并集，并存储在新的 key 中<br>20 ZSCAN key cursor [MATCH pattern] [COUNT count]<br>迭代有序集合中的元素（包括元素成员和元素分值）</p>
<h3 id="6-Redis的Hash数据结构"><a href="#6-Redis的Hash数据结构" class="headerlink" title="6.Redis的Hash数据结构"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.Redis的Hash数据结构</h3><h4 id="6-1-数据结构"><a href="#6-1-数据结构" class="headerlink" title="6.1.数据结构"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.1.数据结构</h4><p>Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象。<br>Redis 中每个 hash 可以存储 232 - 1 键值对（40多亿）。</p>
<p>Map&lt;String,Map&lt;String,String&gt;&gt;</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/91f5fa4e67f0d06807764b4a2627cf8e.png" alt="这里写图片描述"></p>
<h4 id="6-2-基本操作"><a href="#6-2-基本操作" class="headerlink" title="6.2.基本操作"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.2.基本操作</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/2d01af818f0e9bb0bdd1f5b9ce34ef5d.png" alt="这里写图片描述"></p>
<h4 id="6-3-判断是否存在和选择性插入"><a href="#6-3-判断是否存在和选择性插入" class="headerlink" title="6.3.判断是否存在和选择性插入"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.3.判断是否存在和选择性插入</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/8dbeb15077cb50ee1f0516aec6c06c3c.png" alt="这里写图片描述"></p>
<h4 id="6-4-Hash的自增长"><a href="#6-4-Hash的自增长" class="headerlink" title="6.4.Hash的自增长"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.4.Hash的自增长</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/7167cfab2972018fe2cfbcc2deefc860.png" alt="这里写图片描述"></p>
<h4 id="6-5-只获取字段名或字段值"><a href="#6-5-只获取字段名或字段值" class="headerlink" title="6.5.只获取字段名或字段值"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.5.只获取字段名或字段值</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/dc699cb054d9b8e044668b3473eeb5c8.png" alt="这里写图片描述"></p>
<h4 id="6-6-获取字段数量"><a href="#6-6-获取字段数量" class="headerlink" title="6.6.获取字段数量"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>6.6.获取字段数量</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/1237b7bb40bca413fa4163e6347eb395.png" alt="这里写图片描述"><br>下表列出了 redis hash 基本的相关命令：<br>序号 命令及描述<br>1 HDEL key field2 [field2]<br>删除一个或多个哈希表字段<br>2 HEXISTS key field<br>查看哈希表 key 中，指定的字段是否存在。<br>3 HGET key field<br>获取存储在哈希表中指定字段的值。<br>4 HGETALL key<br>获取在哈希表中指定 key 的所有字段和值<br>5 HINCRBY key field increment<br>为哈希表 key 中的指定字段的整数值加上增量 increment 。<br>6 HINCRBYFLOAT key field increment<br>为哈希表 key 中的指定字段的浮点数值加上增量 increment 。<br>7 HKEYS key<br>获取所有哈希表中的字段<br>8 HLEN key<br>获取哈希表中字段的数量<br>9 HMGET key field1 [field2]<br>获取所有给定字段的值<br>10 HMSET key field1 value1 [field2 value2 ]<br>同时将多个 field-value (域-值)对设置到哈希表 key 中。<br>11 HSET key field value<br>将哈希表 key 中的字段 field 的值设为 value 。<br>12 HSETNX key field value<br>只有在字段 field 不存在时，设置哈希表字段的值。<br>13 HVALS key<br>获取哈希表中所有值<br>14 HSCAN key cursor [MATCH pattern] [COUNT count]<br>迭代哈希表中的键值对。</p>
<h3 id="7-Redis之生存时间"><a href="#7-Redis之生存时间" class="headerlink" title="7.Redis之生存时间"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>7.Redis之生存时间</h3><h4 id="7-1-设置生存时间"><a href="#7-1-设置生存时间" class="headerlink" title="7.1.设置生存时间"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>7.1.设置生存时间</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/1879f8e22f7b509b2ea4f403d7d5535e.png" alt="这里写图片描述"><br>TTL返回值：<br>大于0的数字：剩余生存时间，单位为秒<br>-1 ： 没有生存时间，永久存储<br>-2 ： 数据已经被删除</p>
<h4 id="7-2-清除生存时间"><a href="#7-2-清除生存时间" class="headerlink" title="7.2.清除生存时间"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>7.2.清除生存时间</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/8ad21f17e7166f5ac15f9d0534741aeb.png" alt="这里写图片描述"></p>
<h3 id="8-Redis事务"><a href="#8-Redis事务" class="headerlink" title="8.Redis事务"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>8.Redis事务</h3><h4 id="8-1-11-1、Redis事务"><a href="#8-1-11-1、Redis事务" class="headerlink" title="8.1.11.1、Redis事务"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>8.1.11.1、Redis事务</h4><p>Redis 事务可以一次执行多个命令， 并且带有以下两个重要的保证：<br>事务是一个单独的隔离操作：事务中的所有命令都会序列化、按顺序地执行。事务在执行的过程中，不会被其他客户端发送来的命令请求所打断。<br>事务是一个原子操作：事务中的命令要么全部被执行，要么全部都不执行。<br>一个事务从开始到执行会经历以下三个阶段：<br>开始事务。<br>命令入队。<br>执行事务。</p>
<h4 id="8-2-11-2、实例"><a href="#8-2-11-2、实例" class="headerlink" title="8.2.11.2、实例"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>8.2.11.2、实例</h4><p>以下是一个事务的例子， 它先以 MULTI 开始一个事务， 然后将多个命令入队到事务中， 最后由 EXEC 命令触发事务， 一并执行事务中的所有命令：<br>redis 127.0.0.1:6379&gt; MULTI<br>OK</p>
<p>redis 127.0.0.1:6379&gt; SET book-name “Mastering C++ in 21 days”<br>QUEUED</p>
<p>redis 127.0.0.1:6379&gt; GET book-name<br>QUEUED</p>
<p>redis 127.0.0.1:6379&gt; SADD tag “C++” “Programming” “Mastering Series”<br>QUEUED</p>
<p>redis 127.0.0.1:6379&gt; SMEMBERS tag<br>QUEUED</p>
<p>redis 127.0.0.1:6379&gt; EXEC</p>
<ol>
<li>OK</li>
<li>“Mastering C++ in 21 days”</li>
<li>(integer) 3</li>
<li><ol>
<li>“Mastering Series”</li>
<li>“C++”</li>
<li>“Programming”</li>
</ol>
</li>
</ol>
<h4 id="8-3-11-3、Redis-事务命令"><a href="#8-3-11-3、Redis-事务命令" class="headerlink" title="8.3.11.3、Redis 事务命令"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>8.3.11.3、Redis 事务命令</h4><p>下表列出了 redis 事务的相关命令：<br>序号 命令及描述<br>1 DISCARD<br>取消事务，放弃执行事务块内的所有命令。<br>2 EXEC<br>执行所有事务块内的命令。<br>3 MULTI<br>标记一个事务块的开始。<br>4 UNWATCH<br>取消 WATCH 命令对所有 key 的监视。<br>5 WATCH key [key …]<br>监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。</p>
<h3 id="9-客户端"><a href="#9-客户端" class="headerlink" title="9.客户端"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.客户端</h3><h4 id="9-1-支持的语言"><a href="#9-1-支持的语言" class="headerlink" title="9.1.支持的语言"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.1.支持的语言</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/8df63241ed92c275da345ef71468c9fd.png" alt="这里写图片描述"></p>
<h4 id="9-2-Jedis"><a href="#9-2-Jedis" class="headerlink" title="9.2.Jedis"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.2.Jedis</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/5dcf98185fce04712486271a4da16a07.png" alt="这里写图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/7cf8fd5cbb8c181a31de5149081e9418.png" alt="这里写图片描述"></p>
<h4 id="9-3-Jedis的使用"><a href="#9-3-Jedis的使用" class="headerlink" title="9.3.Jedis的使用"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.3.Jedis的使用</h4><p>（项目下载地址<a target="_blank" rel="noopener" href="https://download.csdn.net/download/zpcandzhj/10571317%EF%BC%89">https://download.csdn.net/download/zpcandzhj/10571317）</a></p>
<h5 id="9-3-1-导入依赖"><a href="#9-3-1-导入依赖" class="headerlink" title="9.3.1.导入依赖"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.3.1.导入依赖</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.6.0&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.6.4&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="9-3-2-简单示例"><a href="#9-3-2-简单示例" class="headerlink" title="9.3.2.简单示例"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.3.2.简单示例</h5><p>(在运行java程序之前确保redis服务器已经启动！)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import redis.clients.jedis.Jedis;</span><br><span class="line">/**</span><br><span class="line"> * @author Evan</span><br><span class="line"> */</span><br><span class="line">public class JedisDemo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 构造jedis对象</span><br><span class="line">        Jedis jedis = new Jedis(&quot;127.0.0.1&quot;, 6379);</span><br><span class="line">        // 向redis中添加数据</span><br><span class="line">        jedis.set(&quot;name&quot;, &quot;鸟鹏&quot;);</span><br><span class="line">        // 从redis中读取数据</span><br><span class="line">        String value = jedis.get(&quot;name&quot;);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        // 关闭连接</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">运行之后查看redis中的值：</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="9-3-3-连接池使用"><a href="#9-3-3-连接池使用" class="headerlink" title="9.3.3.连接池使用"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.3.3.连接池使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import redis.clients.jedis.Jedis;</span><br><span class="line">import redis.clients.jedis.JedisPool;</span><br><span class="line">import redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author Evan</span><br><span class="line"> */</span><br><span class="line">public class JedisPoolDemo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 构建连接池配置信息</span><br><span class="line">        JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();</span><br><span class="line">        // 设置最大连接数</span><br><span class="line">        jedisPoolConfig.setMaxTotal(50);</span><br><span class="line">        // 构建连接池</span><br><span class="line">        JedisPool jedisPool = new JedisPool(jedisPoolConfig, &quot;127.0.0.1&quot;, 6379);</span><br><span class="line">        // 从连接池中获取连接</span><br><span class="line">        Jedis jedis = jedisPool.getResource();</span><br><span class="line">        // 读取数据</span><br><span class="line">        System.out.println(jedis.get(&quot;name&quot;));</span><br><span class="line">        // 将连接还回到连接池中</span><br><span class="line">        jedisPool.returnResource(jedis);</span><br><span class="line">        // 释放连接池</span><br><span class="line">        jedisPool.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="9-3-4-分片式集群"><a href="#9-3-4-分片式集群" class="headerlink" title="9.3.4.分片式集群"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.3.4.分片式集群</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i-blog.csdnimg.cn/blog_migrate/7af5d57994b466ebf85ae1c70579fa65.png" alt="这里写图片描述"></p>
<p>存在的问题：无法动态增加减少服务节点。</p>
<h5 id="9-3-5-分片式集群的使用"><a href="#9-3-5-分片式集群的使用" class="headerlink" title="9.3.5.分片式集群的使用"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>9.3.5.分片式集群的使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">import redis.clients.jedis.JedisPoolConfig;</span><br><span class="line">import redis.clients.jedis.JedisShardInfo;</span><br><span class="line">import redis.clients.jedis.ShardedJedis;</span><br><span class="line">import redis.clients.jedis.ShardedJedisPool;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 集群式的连接池</span><br><span class="line"> */</span><br><span class="line">public class ShardedJedisPoolDemo &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // 构建连接池配置信息</span><br><span class="line">        JedisPoolConfig poolConfig = new JedisPoolConfig();</span><br><span class="line">        // 设置最大连接数</span><br><span class="line">        poolConfig.setMaxTotal(50);</span><br><span class="line"></span><br><span class="line">        // 定义集群信息</span><br><span class="line">        List&lt;JedisShardInfo&gt; shards = new ArrayList&lt;JedisShardInfo&gt;();</span><br><span class="line"></span><br><span class="line">        shards.add(new JedisShardInfo(&quot;127.0.0.1&quot;, 6379));</span><br><span class="line">        //shards.add(new JedisShardInfo(&quot;192.168.48.22&quot;, 6379));</span><br><span class="line"></span><br><span class="line">        // 定义集群连接池</span><br><span class="line">        ShardedJedisPool shardedJedisPool = new ShardedJedisPool(poolConfig, shards);</span><br><span class="line">        ShardedJedis shardedJedis = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 从连接池中获取到jedis分片对象</span><br><span class="line">            shardedJedis = shardedJedisPool.getResource();</span><br><span class="line">            // 从redis中获取数据</span><br><span class="line">            String value = shardedJedis.get(&quot;name&quot;);</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (null != shardedJedis) &#123;</span><br><span class="line">                // 关闭，检测连接是否有效，有效则放回到连接池中，无效则重置状态</span><br><span class="line">                shardedJedis.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // 关闭连接池</span><br><span class="line">        shardedJedisPool.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="10-Spring项目集成Redis"><a href="#10-Spring项目集成Redis" class="headerlink" title="10.Spring项目集成Redis"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>10.Spring项目集成Redis</h3><h4 id="10-1-1-Spring和Jedis的整合"><a href="#10-1-1-Spring和Jedis的整合" class="headerlink" title="10.1.1.Spring和Jedis的整合"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>10.1.1.Spring和Jedis的整合</h4><p>applicationContext.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span><br><span class="line">   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;</span><br><span class="line">    &lt;!-- 开启注解 --&gt;</span><br><span class="line">    &lt;context:component-scan base-package=&quot;com.zpc.redis&quot;&gt;&lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--连接池的配置--&gt;</span><br><span class="line">    &lt;bean id=&quot;jedisPoolConfig&quot; class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;maxTotal&quot; value=&quot;10&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--分片式连接池的配置--&gt;</span><br><span class="line">    &lt;bean class=&quot;redis.clients.jedis.ShardedJedisPool&quot;&gt;</span><br><span class="line">        &lt;constructor-arg index=&quot;0&quot; ref=&quot;jedisPoolConfig&quot;/&gt;</span><br><span class="line">        &lt;constructor-arg index=&quot;1&quot;&gt;</span><br><span class="line">            &lt;list&gt;</span><br><span class="line">                &lt;bean class=&quot;redis.clients.jedis.JedisShardInfo&quot;&gt;</span><br><span class="line">                    &lt;constructor-arg index=&quot;0&quot; value=&quot;127.0.0.1&quot;/&gt;</span><br><span class="line">                    &lt;constructor-arg index=&quot;1&quot; value=&quot;6379&quot;/&gt;</span><br><span class="line">                &lt;/bean&gt;</span><br><span class="line">            &lt;/list&gt;</span><br><span class="line">        &lt;/constructor-arg&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="10-1-2-封装RedisService"><a href="#10-1-2-封装RedisService" class="headerlink" title="10.1.2.封装RedisService"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>10.1.2.封装RedisService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">package com.zpc.redis.service;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import redis.clients.jedis.ShardedJedis;</span><br><span class="line">import redis.clients.jedis.ShardedJedisPool;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class RedisService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ShardedJedisPool shardedJedisPool;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 执行set操作</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @param value</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String set(String key, String value) &#123;</span><br><span class="line">        ShardedJedis shardedJedis = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 从连接池中获取到jedis分片对象</span><br><span class="line">            shardedJedis = shardedJedisPool.getResource();</span><br><span class="line">            return shardedJedis.set(key, value);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (null != shardedJedis) &#123;</span><br><span class="line">                // 关闭，检测连接是否有效，有效则放回到连接池中，无效则重置状态</span><br><span class="line">                shardedJedis.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 执行get操作</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String get(String key) &#123;</span><br><span class="line">        ShardedJedis shardedJedis = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 从连接池中获取到jedis分片对象</span><br><span class="line">            shardedJedis = shardedJedisPool.getResource();</span><br><span class="line">            return shardedJedis.get(key);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (null != shardedJedis) &#123;</span><br><span class="line">                // 关闭，检测连接是否有效，有效则放回到连接池中，无效则重置状态</span><br><span class="line">                shardedJedis.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="10-1-3-优化RedisService"><a href="#10-1-3-优化RedisService" class="headerlink" title="10.1.3.优化RedisService"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>10.1.3.优化RedisService</h4><p>定义接口：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Function&lt;T, E&gt; &#123;</span><br><span class="line">    T callback(E e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>RedisService2的实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">package com.zpc.redis.service;</span><br><span class="line"></span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line">import redis.clients.jedis.ShardedJedis;</span><br><span class="line">import redis.clients.jedis.ShardedJedisPool;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class RedisService2 &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private ShardedJedisPool shardedJedisPool;</span><br><span class="line"></span><br><span class="line">    private &lt;T&gt; T execute(Function&lt;T, ShardedJedis&gt; fun) &#123;</span><br><span class="line">        ShardedJedis shardedJedis = null;</span><br><span class="line">        try &#123;</span><br><span class="line">            // 从连接池中获取到jedis分片对象</span><br><span class="line">            shardedJedis = shardedJedisPool.getResource();</span><br><span class="line">            return fun.callback(shardedJedis);</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if (null != shardedJedis) &#123;</span><br><span class="line">                // 关闭，检测连接是否有效，有效则放回到连接池中，无效则重置状态</span><br><span class="line">                shardedJedis.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 执行set操作</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @param value</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String set(final String key, final String value) &#123;</span><br><span class="line">        return this.execute(new Function&lt;String, ShardedJedis&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String callback(ShardedJedis e) &#123;</span><br><span class="line">                return e.set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 执行get操作</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String get(final String key) &#123;</span><br><span class="line">        return this.execute(new Function&lt;String, ShardedJedis&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String callback(ShardedJedis e) &#123;</span><br><span class="line">                return e.get(key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 执行删除操作</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public Long del(final String key) &#123;</span><br><span class="line">        return this.execute(new Function&lt;Long, ShardedJedis&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Long callback(ShardedJedis e) &#123;</span><br><span class="line">                return e.del(key);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 设置生存时间，单位为：秒</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @param seconds</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public Long expire(final String key, final Integer seconds) &#123;</span><br><span class="line">        return this.execute(new Function&lt;Long, ShardedJedis&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Long callback(ShardedJedis e) &#123;</span><br><span class="line">                return e.expire(key, seconds);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 执行set操作并且设置生存时间，单位为：秒</span><br><span class="line">     *</span><br><span class="line">     * @param key</span><br><span class="line">     * @param value</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public String set(final String key, final String value, final Integer seconds) &#123;</span><br><span class="line">        return this.execute(new Function&lt;String, ShardedJedis&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public String callback(ShardedJedis e) &#123;</span><br><span class="line">                String str = e.set(key, value);</span><br><span class="line">                e.expire(key, seconds);</span><br><span class="line">                return str;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="10-1-4-测试RedisService"><a href="#10-1-4-测试RedisService" class="headerlink" title="10.1.4.测试RedisService"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>10.1.4.测试RedisService</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.test.context.ContextConfiguration;</span><br><span class="line">import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line">@RunWith(SpringJUnit4ClassRunner.class)</span><br><span class="line">@ContextConfiguration(locations = &quot;classpath:applicationContext.xml&quot;)</span><br><span class="line">public class RedisServiceTest &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    RedisService redisService;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void set() throws Exception &#123;</span><br><span class="line">        redisService.set(&quot;keyx&quot;, &quot;valuex&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void get() throws Exception &#123;</span><br><span class="line">        System.out.println(&quot;\n=============res:&quot; + redisService.get(&quot;keyx&quot;)+&quot;\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="11-SpringBoot集成Redis"><a href="#11-SpringBoot集成Redis" class="headerlink" title="11.SpringBoot集成Redis"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>11.SpringBoot集成Redis</h3><h4 id="11-1-引入maven依赖"><a href="#11-1-引入maven依赖" class="headerlink" title="11.1.引入maven依赖"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>11.1.引入maven依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="11-2-新增配置文件信息"><a href="#11-2-新增配置文件信息" class="headerlink" title="11.2.新增配置文件信息"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>11.2.新增配置文件信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">application.properties</span><br><span class="line">spring.redis.database=0</span><br><span class="line">spring.redis.host=127.0.0.1</span><br><span class="line">spring.redis.port=6379</span><br><span class="line">#spring.redis.password=123456</span><br><span class="line">spring.redis.jedis.pool.max-idle=8</span><br><span class="line">spring.redis.jedis.pool.min-idle=0</span><br><span class="line">spring.redis.jedis.pool.max-active=8</span><br><span class="line">spring.redis.edis.pool.max-wait=-1</span><br><span class="line">spring.redis.timeout=5000</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="11-3-Java代码"><a href="#11-3-Java代码" class="headerlink" title="11.3.Java代码"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>11.3.Java代码</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.data.redis.core.StringRedisTemplate;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class RedisService &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line">    public void setStr(String key, String value) &#123;</span><br><span class="line">        setStr(key, value, null);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setStr(String key, String value, Long time) &#123;</span><br><span class="line">        stringRedisTemplate.opsForValue().set(key, value);</span><br><span class="line">        if (time != null) &#123;</span><br><span class="line">            stringRedisTemplate.expire(key, time, TimeUnit.SECONDS);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Object getKey(String key) &#123;</span><br><span class="line">        return stringRedisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void delKey(String key) &#123;</span><br><span class="line">        stringRedisTemplate.delete(key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="11-4-单元测试"><a href="#11-4-单元测试" class="headerlink" title="11.4.单元测试"></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a>11.4.单元测试</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import com.npbase.runner.NpRunnerApplication;</span><br><span class="line">import com.npbase.service.redis.RedisService;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import org.junit.runner.RunWith;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line">import org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by ZHOUPENGCHENG390 on 2018/7/3.</span><br><span class="line"> */</span><br><span class="line">@RunWith(SpringRunner.class)</span><br><span class="line">@SpringBootTest(classes = NpRunnerApplication.class)</span><br><span class="line">public class HelloControllerTest &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    RedisService redisService;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void testRedis() &#123;</span><br><span class="line">        redisService.setStr(&quot;name&quot;, &quot;鹏程&quot;);</span><br><span class="line">        System.out.println(&quot;===========getName:&quot; + redisService.getKey(&quot;name&quot;) + &quot;===========\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a><a target="_blank" rel="noopener" href="https://blog.csdn.net/hellozpc/article/details/81267030"></a></h3></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Lzh</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/')">Redis数据库</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Redis数据库&amp;url=http://example.com/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/&amp;pic=https://www.helloimg.com/i/2025/03/28/67e66568e6b21.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Lzh正在写代码</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Web/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Web<span class="tagsPageCount">4</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://www.helloimg.com/i/2025/01/22/679071c920edf.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/03/28/WebSocket/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/03/28/67e62b290f5f5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">WebSocket</div></div></a></div><div class="next-post pull-right"><a href="/2025/03/28/JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/01/22/679071c920edf.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JAVA多线程</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/03/28/WebSocket/" title="WebSocket"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/03/28/67e62b290f5f5.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-03-28</div><div class="title">WebSocket</div></div></a></div><div><a href="/2025/01/06/Web%E9%A1%B9%E7%9B%AE-%E6%8B%B3%E7%9A%87-%E4%B8%8A/" title="Web项目---拳皇(上)"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/01/06/677bc62f84cf4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-06</div><div class="title">Web项目---拳皇(上)</div></div></a></div><div><a href="/2025/01/07/Web%E9%A1%B9%E7%9B%AE-%E6%8B%B3%E7%9A%87-%E4%B8%8B/" title="Web项目-拳皇-下"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/01/06/677bc62f84cf4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-01-07</div><div class="title">Web项目-拳皇-下</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">千里之行始于足下</div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1%E7%9B%AE%E5%89%8D%E7%BC%93%E5%AD%98%E7%9A%84%E4%B8%BB%E6%B5%81%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">1.1目前缓存的主流技术</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">1.2什么是缓存？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Redis"><span class="toc-number"></span> <span class="toc-text">2.Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-NoSQL"><span class="toc-number">1.</span> <span class="toc-text">2.1.NoSQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E4%B8%BB%E6%B5%81%E7%9A%84NoSQL%E4%BA%A7%E5%93%81"><span class="toc-number">2.</span> <span class="toc-text">2.2.主流的NoSQL产品</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-Redis%E7%AE%80%E4%BB%8B"><span class="toc-number">3.</span> <span class="toc-text">2.3.Redis简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-%E5%8E%86%E5%8F%B2%E4%B8%8E%E5%8F%91%E5%B1%95"><span class="toc-number">4.</span> <span class="toc-text">2.4.历史与发展</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-Redis%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">5.</span> <span class="toc-text">2.5.Redis的特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-Redis%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E"><span class="toc-number">6.</span> <span class="toc-text">2.6.Redis版本说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-%E4%B8%8B%E8%BD%BDRedis"><span class="toc-number">7.</span> <span class="toc-text">2.7.下载Redis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-Redis%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">8.</span> <span class="toc-text">2.8.Redis的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-8-1-%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">2.8.1.安装文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-8-2-%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">8.2.</span> <span class="toc-text">2.8.2.安装方式一</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-8-3-%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%88%E5%AE%89%E8%A3%85%E5%88%B0%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%EF%BC%89"><span class="toc-number">8.3.</span> <span class="toc-text">2.8.3.安装方式二（安装到系统服务）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-8-4-32%E4%BD%8D%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85"><span class="toc-number">8.4.</span> <span class="toc-text">2.8.4.32位操作系统安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-8-5-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">8.5.</span> <span class="toc-text">2.8.5.注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-Redis-cli%E4%BD%BF%E7%94%A8"><span class="toc-number">9.</span> <span class="toc-text">2.9.Redis-cli使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-9-1-redis-cli%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B9%8B%E5%8F%91%E9%80%81%E5%91%BD%E4%BB%A4"><span class="toc-number">9.1.</span> <span class="toc-text">2.9.1.redis-cli的使用之发送命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-9-2-redis-cli%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B9%8B%E5%91%BD%E4%BB%A4%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">9.2.</span> <span class="toc-text">2.9.2.redis-cli的使用之命令返回值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-10-Redis%E7%9A%84%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">10.</span> <span class="toc-text">2.10.Redis的多数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-10-1-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E9%87%8F"><span class="toc-number">10.1.</span> <span class="toc-text">2.10.1.配置数据库数量</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-11-Redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-number">11.</span> <span class="toc-text">2.11.Redis的基本命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-11-1-KEYS"><span class="toc-number">11.1.</span> <span class="toc-text">2.11.1.KEYS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-11-2-EXISTS"><span class="toc-number">11.2.</span> <span class="toc-text">2.11.2.EXISTS</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-11-3-DEL"><span class="toc-number">11.3.</span> <span class="toc-text">2.11.3.DEL</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-11-4-TYPE"><span class="toc-number">11.4.</span> <span class="toc-text">2.11.4.TYPE</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-11-5-HELP"><span class="toc-number">11.5.</span> <span class="toc-text">2.11.5.HELP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Redis%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-String"><span class="toc-number"></span> <span class="toc-text">3.Redis的字符串数据类型(String)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">3.1.字符串类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-GET%E3%80%81SET"><span class="toc-number">2.</span> <span class="toc-text">3.2.GET、SET</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-INCR"><span class="toc-number">3.</span> <span class="toc-text">3.3.INCR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-INCRBY"><span class="toc-number">4.</span> <span class="toc-text">3.4.INCRBY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-DECR%E3%80%81DECRBY"><span class="toc-number">5.</span> <span class="toc-text">3.5.DECR、DECRBY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-APPEND"><span class="toc-number">6.</span> <span class="toc-text">3.6.APPEND</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-STRLEN"><span class="toc-number">7.</span> <span class="toc-text">3.7.STRLEN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-MSET%E3%80%81MGET"><span class="toc-number">8.</span> <span class="toc-text">3.8.MSET、MGET</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%88%97%E8%A1%A8%E7%B1%BB%E5%9E%8B-List"><span class="toc-number"></span> <span class="toc-text">4. 列表类型(List)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Redis-%E9%9B%86%E5%90%88-Set"><span class="toc-number"></span> <span class="toc-text">5.Redis 集合(Set)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-set"><span class="toc-number">1.</span> <span class="toc-text">5.1.set</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88-sorted-set"><span class="toc-number">2.</span> <span class="toc-text">5.2.有序集合(sorted set)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Redis%E7%9A%84Hash%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number"></span> <span class="toc-text">6.Redis的Hash数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">6.1.数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">2.</span> <span class="toc-text">6.2.基本操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%92%8C%E9%80%89%E6%8B%A9%E6%80%A7%E6%8F%92%E5%85%A5"><span class="toc-number">3.</span> <span class="toc-text">6.3.判断是否存在和选择性插入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-Hash%E7%9A%84%E8%87%AA%E5%A2%9E%E9%95%BF"><span class="toc-number">4.</span> <span class="toc-text">6.4.Hash的自增长</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-%E5%8F%AA%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E5%90%8D%E6%88%96%E5%AD%97%E6%AE%B5%E5%80%BC"><span class="toc-number">5.</span> <span class="toc-text">6.5.只获取字段名或字段值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-6-%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E6%95%B0%E9%87%8F"><span class="toc-number">6.</span> <span class="toc-text">6.6.获取字段数量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Redis%E4%B9%8B%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number"></span> <span class="toc-text">7.Redis之生存时间</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E8%AE%BE%E7%BD%AE%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number">1.</span> <span class="toc-text">7.1.设置生存时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E6%B8%85%E9%99%A4%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4"><span class="toc-number">2.</span> <span class="toc-text">7.2.清除生存时间</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-Redis%E4%BA%8B%E5%8A%A1"><span class="toc-number"></span> <span class="toc-text">8.Redis事务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-11-1%E3%80%81Redis%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">8.1.11.1、Redis事务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-11-2%E3%80%81%E5%AE%9E%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">8.2.11.2、实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-11-3%E3%80%81Redis-%E4%BA%8B%E5%8A%A1%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">8.3.11.3、Redis 事务命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number"></span> <span class="toc-text">9.客户端</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-%E6%94%AF%E6%8C%81%E7%9A%84%E8%AF%AD%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">9.1.支持的语言</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-Jedis"><span class="toc-number">2.</span> <span class="toc-text">9.2.Jedis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-Jedis%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">9.3.Jedis的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-1-%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">3.1.</span> <span class="toc-text">9.3.1.导入依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-2-%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.2.</span> <span class="toc-text">9.3.2.简单示例</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-3-%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.</span> <span class="toc-text">9.3.3.连接池使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-4-%E5%88%86%E7%89%87%E5%BC%8F%E9%9B%86%E7%BE%A4"><span class="toc-number">3.4.</span> <span class="toc-text">9.3.4.分片式集群</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3-5-%E5%88%86%E7%89%87%E5%BC%8F%E9%9B%86%E7%BE%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.5.</span> <span class="toc-text">9.3.5.分片式集群的使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-Spring%E9%A1%B9%E7%9B%AE%E9%9B%86%E6%88%90Redis"><span class="toc-number"></span> <span class="toc-text">10.Spring项目集成Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-1-Spring%E5%92%8CJedis%E7%9A%84%E6%95%B4%E5%90%88"><span class="toc-number">1.</span> <span class="toc-text">10.1.1.Spring和Jedis的整合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-2-%E5%B0%81%E8%A3%85RedisService"><span class="toc-number">2.</span> <span class="toc-text">10.1.2.封装RedisService</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-3-%E4%BC%98%E5%8C%96RedisService"><span class="toc-number">3.</span> <span class="toc-text">10.1.3.优化RedisService</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-4-%E6%B5%8B%E8%AF%95RedisService"><span class="toc-number">4.</span> <span class="toc-text">10.1.4.测试RedisService</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-SpringBoot%E9%9B%86%E6%88%90Redis"><span class="toc-number"></span> <span class="toc-text">11.SpringBoot集成Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#11-1-%E5%BC%95%E5%85%A5maven%E4%BE%9D%E8%B5%96"><span class="toc-number">1.</span> <span class="toc-text">11.1.引入maven依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-2-%E6%96%B0%E5%A2%9E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="toc-number">2.</span> <span class="toc-text">11.2.新增配置文件信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-3-Java%E4%BB%A3%E7%A0%81"><span class="toc-number">3.</span> <span class="toc-text">11.3.Java代码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-4-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="toc-number">4.</span> <span class="toc-text">11.4.单元测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number"></span> <span class="toc-text"></span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/28/JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="JAVA多线程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/01/22/679071c920edf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JAVA多线程"/></a><div class="content"><a class="title" href="/2025/03/28/JAVA%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="JAVA多线程">JAVA多线程</a><time datetime="2025-03-28T09:11:18.000Z" title="发表于 2025-03-28 17:11:18">2025-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/" title="Redis数据库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/03/28/67e66568e6b21.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis数据库"/></a><div class="content"><a class="title" href="/2025/03/28/Redis%E6%95%B0%E6%8D%AE%E5%BA%93/" title="Redis数据库">Redis数据库</a><time datetime="2025-03-28T08:54:18.000Z" title="发表于 2025-03-28 16:54:18">2025-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/28/WebSocket/" title="WebSocket"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/03/28/67e62b290f5f5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WebSocket"/></a><div class="content"><a class="title" href="/2025/03/28/WebSocket/" title="WebSocket">WebSocket</a><time datetime="2025-03-28T04:39:21.000Z" title="发表于 2025-03-28 12:39:21">2025-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/Docker%E5%AE%89%E8%A3%85/" title="Docker安装"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/03/15/67d585af76402.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker安装"/></a><div class="content"><a class="title" href="/2025/03/15/Docker%E5%AE%89%E8%A3%85/" title="Docker安装">Docker安装</a><time datetime="2025-03-15T13:44:11.000Z" title="发表于 2025-03-15 21:44:11">2025-03-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/15/Docker%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" title="Docker项目部署"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://www.helloimg.com/i/2025/03/15/67d585af76402.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker项目部署"/></a><div class="content"><a class="title" href="/2025/03/15/Docker%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/" title="Docker项目部署">Docker项目部署</a><time datetime="2025-03-15T13:44:04.000Z" title="发表于 2025-03-15 21:44:04">2025-03-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Lzh" target="_blank">Lzh</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">11</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Docker/" style="font-size: 0.88rem;">Docker<sup>4</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>7</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>4</sup></a><a href="/tags/Shell/" style="font-size: 0.88rem;">Shell<sup>1</sup></a><a href="/tags/Springboot/" style="font-size: 0.88rem;">Springboot<sup>8</sup></a><a href="/tags/Unity3D/" style="font-size: 0.88rem;">Unity3D<sup>3</sup></a><a href="/tags/Unreal-Engine/" style="font-size: 0.88rem;">Unreal Engine<sup>2</sup></a><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>2</sup></a><a href="/tags/Web/" style="font-size: 0.88rem;">Web<sup>4</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>7</sup></a><a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 0.88rem;">设计模式<sup>15</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Lzh 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>